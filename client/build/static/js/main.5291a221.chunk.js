(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{10:function(e,t,a){e.exports={grid:"Dashboard_grid__dGwvL",gridTop:"Dashboard_gridTop__1PQ_w",gridItem:"Dashboard_gridItem__36m9l",gridItemHeader:"Dashboard_gridItemHeader__3nZQF",gridItemContent:"Dashboard_gridItemContent__TiRLi",shrink:"Dashboard_shrink__3hUSG",flexCenter:"Dashboard_flexCenter__1d6j1",settingsIcon:"Dashboard_settingsIcon__Vvu7K"}},102:function(e,t,a){e.exports={pageWrapper:"AllLogs_pageWrapper__PpTRR",bottomSection:"AllLogs_bottomSection__1Oslr"}},103:function(e,t,a){e.exports={averageBox:"AverageBox_averageBox__10pGj",dark:"AverageBox_dark__1lKIk"}},121:function(e,t,a){e.exports={container:"ErrorBox_container__3_4Pb",fadeIn:"ErrorBox_fadeIn__3Iy4-"}},125:function(e,t,a){e.exports={pageWrapper:"logview_pageWrapper__1BiW2"}},126:function(e,t,a){e.exports={container:"SuccessBox_container__1Jqdh",fadeIn:"SuccessBox_fadeIn__3bH0i"}},127:function(e,t,a){e.exports=a.p+"static/media/morning.32026445.svg"},128:function(e,t,a){e.exports=a.p+"static/media/afternoon.1bf5e1d2.svg"},129:function(e,t,a){e.exports=a.p+"static/media/evening.30a34177.svg"},132:function(e,t,a){e.exports=a(166)},15:function(e,t,a){e.exports={daytime_container:"DaytimeGraph_daytime_container__nYl1v",daytime_canvas:"DaytimeGraph_daytime_canvas__41a7_",daytime_bullet:"DaytimeGraph_daytime_bullet__JkNHw",dark:"DaytimeGraph_dark__3Bepl",daytime_bullet_text:"DaytimeGraph_daytime_bullet_text__56TbX",y_axis_number_daytime:"DaytimeGraph_y_axis_number_daytime__2BEm6",daytime_bottom_line:"DaytimeGraph_daytime_bottom_line__2zQhX",daytime_time:"DaytimeGraph_daytime_time__UgUNy"}},166:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(83),o=a.n(s),l=a(7),c=a(1),i=a(45),u=a(118),m=a.n(u),d=a(119),g=a(12),p=Object(i.c)({logs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.payload,r=t.type;switch(r){case"CAN_LOG":return Object(g.a)({},e,{canLog:a});case"GET_LAST_LOGS":case"GET_LOG":case"GET_LOGS":case"POST_LOG":return Object(g.a)({},e,{},a);case"CLEAR_LOGS":return Object(g.a)({},e,{lastLogs:[],allLogs:[]});case"CLEAR_LAST_LOGS":return Object(g.a)({},e,{lastLogs:t.lastLogs});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"CREATE_USER":return Object(g.a)({},e,{createUserSuccess:r.createUserSuccess,createUserError:r.createUserError});case"LOGIN_USER":return Object(g.a)({},e,{isAuth:r.isAuth,loginError:r.error});case"USER_AUTH":return r.error?Object(g.a)({},e,{authError:r.error,isAuth:!1}):Object(g.a)({},e,{authError:null,isAuth:!0,id:r.id||null,email:r.email||null,firstName:r.firstName||"",lastName:r.lastName||""});case"CLEAR_USER":return Object(g.a)({},e,{authError:null,isAuth:!1,id:null,email:null,firstName:"",lastName:""});case"EDIT_USER":case"CHANGE_PASSWORD":return Object(g.a)({},e,{},r);default:return e}}}),E=a(48),_="/",f="/login",h="/logout",v="/dashboard",b="/addlog",y="/register",N="/settings",x="/logs",L="/logs/:id",w="/delete",O="/stats",S=a(96),k=a.n(S),A=(a(145),a(3)),j=a.n(A),I=a(55),C=a.n(I),P=a(78),G=a.n(P),U=a(9),T=n.a.createContext(),B=n.a.createContext();function D(){return Object(r.useContext)(T)}var F=function(e){var t=e.color,a=void 0===t?"primary":t,r=e.handleClick,s=void 0===r?function(){}:r,o=e.disabled,l=e.children,c=D();return n.a.createElement("button",{className:j()(G.a.button,c&&G.a.btnDark,function(e){switch(e){case"primary":return G.a.btnPrimary;case"white":return G.a.btnWhite;default:return null}}(a)),onClick:s,disabled:o,type:"button"},l)},R=a(38),W=a.n(R),M=function(){var e=D();return n.a.createElement("div",{className:W.a.loadingScreen},n.a.createElement("div",null,"Loading"),n.a.createElement("br",null),n.a.createElement("div",{className:j()(W.a.barContainer,e&&W.a.dark)},n.a.createElement("div",{className:W.a.bar}),n.a.createElement("div",{className:[W.a.bar,W.a.delay1].join(" ")}),n.a.createElement("div",{className:[W.a.bar,W.a.delay2].join(" ")})))},H=Object(c.b)((function(e){var t=e.user;return{isAuth:t.isAuth,firstName:t.firstName}}))((function(e){var t=e.isAuth,a=e.firstName,s=D();return void 0===t?n.a.createElement(M,null):n.a.createElement("div",{className:C.a.wrapper},n.a.createElement(k.a,{animateIn:"fadeInDown",animateOnce:!0},n.a.createElement("div",{className:j()(C.a.bigLogo,s&&C.a.dark)},"MoodApp")),n.a.createElement(k.a,{animateIn:"fadeInDown",delay:1e3,offset:75,animateOnce:!0},t?n.a.createElement("div",{className:C.a.text},"Hello ",n.a.createElement("span",null,a)):n.a.createElement("div",{className:C.a.text},"Your daily mood tracker")),n.a.createElement(k.a,{animateIn:"fadeInDown",delay:2e3,offset:75,animateOnce:!0},n.a.createElement("div",{className:C.a.buttonWrapper},t?n.a.createElement(r.Fragment,null,n.a.createElement(l.b,{to:"/dashboard"},n.a.createElement(F,{color:"primary"},"Dashboard")),n.a.createElement(l.b,{to:"/logout"},n.a.createElement(F,{color:"white"},"Log out"))):n.a.createElement(r.Fragment,null,n.a.createElement(l.b,{to:"/login"},n.a.createElement(F,{color:"primary"},"Log in")),n.a.createElement(l.b,{to:"/register"},n.a.createElement(F,{color:"white"},"Register"))))))})),V=a(22),q=a.n(V),Y=function(e){var t=e.children;return n.a.createElement("h1",{className:q.a.heading},t)},z=function(e){var t=e.children;return n.a.createElement("div",{className:q.a.formWrapper},t)},Q=function(e){var t=e.children;return n.a.createElement("span",{className:q.a.label},t)},Z=function(e){var t=e.type,a=e.name,r=e.value,s=e.controlEvents,o=e.placeholder,l=s.handleChange,c=s.handleBlur;return"text"===t||"email"===t||"password"===t?n.a.createElement("input",{type:t,name:a,value:r,className:q.a.textInput,onChange:l,onBlur:c}):"textarea"===t?n.a.createElement("textarea",{name:a,onChange:l,onBlur:c,value:r,placeholder:o,className:q.a.textArea}):void 0};Z.defaultProps={type:"text",name:"",value:"",controlEvents:{handleBlur:function(){},handleChange:function(){}},placeholder:""};var J=Z,K=function(e){var t=e.children;return n.a.createElement("div",{className:q.a.formFooter},t)},X=function(e){var t=e.children;return n.a.createElement("div",{className:q.a.errorMessage},t)},$=a(121),ee=a.n($),te=function(e){var t=e.children;return n.a.createElement("div",{className:ee.a.container},t)},ae=a(2),re=a.n(ae),ne=a(32),se="",oe="",le="",ce="",ie="",ue="",me=a(6),de="Required field",ge="Enter a proper e-mail address",pe="Passwords do not match",Ee="Minimum count of symbols is ",_e=a(106),fe=a(20),he=a.n(fe),ve=new(a(131).a),be=function(e){return re.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(function(t){var a,r,n,s;return re.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t({type:"CREATE_USER",payload:{createUserSuccess:null,createUserError:null}}),o.prev=1,o.next=4,re.a.awrap(he.a.post("/api/users",e));case 4:if(a=o.sent,r=a.data){o.next=9;break}return t({type:"CREATE_USER",payload:{createUserSuccess:!1,createUserError:"Unknown error"}}),o.abrupt("return");case 9:if(n=r.success,!(s=r.error)&&n){o.next=13;break}return t({type:"CREATE_USER",payload:{createUserSuccess:!1,createUserError:s||"Could not create user"}}),o.abrupt("return");case 13:n&&t({type:"CREATE_USER",payload:{createUserSuccess:!0,createUserError:null}}),o.next=19;break;case 16:o.prev=16,o.t0=o.catch(1),t({type:"CREATE_USER",payload:{createUserSuccess:!1,createUserError:o.t0||"Could not create user"}});case 19:case"end":return o.stop()}}),null,null,[[1,16]])}));case 1:case"end":return t.stop()}}))},ye=function(e){return re.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(function(t){var a,r,n,s,o,l;return re.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t({type:"LOGIN_USER",payload:{isAuth:!1,error:null}}),c.next=4,re.a.awrap(he.a.post("/api/login",e));case 4:if(a=c.sent,r=a.data,n=r.isAuth,s=r.error,o=r.id,l=r.email,!s){c.next=10;break}return t({type:"LOGIN_USER",payload:{isAuth:!1,error:s}}),c.abrupt("return");case 10:n&&t({type:"LOGIN_USER",payload:{isAuth:n,error:null,id:o,email:l}}),c.next=16;break;case 13:c.prev=13,c.t0=c.catch(0),t({type:"LOGIN_USER",payload:{isAuth:!1,error:c.t0}});case 16:case"end":return c.stop()}}),null,null,[[0,13]])}));case 1:case"end":return t.stop()}}))};var Ne=function(e){var t,a;return re.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.userId,a=e.details,r.abrupt("return",(function(e){var r,n,s;return re.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return"/api/editAccount",r=Object(g.a)({id:t},a),e({type:"EDIT_USER",payload:{isEditingUser:!0,editUserSuccess:null,editUserError:null}}),o.prev=3,o.next=6,re.a.awrap(he.a.post("/api/editAccount",r));case 6:if(n=o.sent,!(s=n.error)){o.next=11;break}return e({type:"EDIT_USER",payload:{isEditingUser:!1,editUserSuccess:!1,editUserError:s}}),o.abrupt("return");case 11:e({type:"EDIT_USER",payload:{isEditingUser:!1,editUserSuccess:!0,editUserError:null}}),o.next=18;break;case 14:o.prev=14,o.t0=o.catch(3),console.error(o.t0),e({type:"EDIT_USER",payload:{isEditingUser:!1,editUserSuccess:!1,editUserError:o.t0}});case 18:case"end":return o.stop()}}),null,null,[[3,14]])}));case 2:case"end":return r.stop()}}))},xe=function(e){var t,a,r;return re.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.userId,a=e.currentPassword,r=e.newPassword,n.abrupt("return",(function(e){var n,s,o,l;return re.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t&&a&&r){c.next=2;break}return c.abrupt("return");case 2:return n="/api/changePassword",s={id:t,oldPassword:a,newPassword:r},c.next=6,re.a.awrap(Le());case 6:return c.prev=6,c.next=9,re.a.awrap(he.a.post(n,s));case 9:if(o=c.sent,!(l=o.error)){c.next=14;break}return e({type:"CHANGE_PASSWORD",payload:{isChangingPassword:!1,changePasswordError:l,changePasswordSuccess:!1}}),c.abrupt("return");case 14:e({type:"CHANGE_PASSWORD",payload:{isChangingPassword:!1,changePasswordError:null,changePasswordSuccess:!0}}),c.next=21;break;case 17:c.prev=17,c.t0=c.catch(6),console.error(c.t0),e({type:"CHANGE_PASSWORD",payload:{isChangingPassword:!1,changePasswordError:c.t0,changePasswordSuccess:!1}});case 21:case"end":return c.stop()}}),null,null,[[6,17]])}));case 2:case"end":return n.stop()}}))},Le=function(){return re.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(function(e){e({type:"CHANGE_PASSWORD",payload:{isChangingPassword:!1,changePasswordError:null,changePasswordSuccess:null}})}));case 1:case"end":return e.stop()}}))},we=function(e,t,a){var r;return re.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return r={userId:a,date:e,timing:t},n.abrupt("return",(function(e){var t,a;return re.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,re.a.awrap(he.a.post("/api/canLog",r));case 2:if(t=n.sent,!(a=t.data)||!a.data){n.next=7;break}return e({type:"CAN_LOG",payload:a.data.canLog}),n.abrupt("return");case 7:e({type:"CAN_LOG",payload:!1});case 8:case"end":return n.stop()}}))}));case 2:case"end":return n.stop()}}))};var Oe=function(e){var t,a,r,n;return re.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.userId,a=e.start,r=e.limit,n=e.currentLogs,s.abrupt("return",(function(e){var s,o,l,c;return re.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return s="/api/getLogs?id=".concat(t).concat(a?"&skip=".concat(a):"","&limit=").concat(r),e({type:"GET_LOGS",payload:{isFetchingAllLogs:!0,fetchAllLogsError:null}}),i.prev=2,i.next=5,re.a.awrap(he.a.get(s));case 5:if(o=i.sent,l=o.data,!(c=o.error)){i.next=11;break}return e({type:"GET_LOGS",payload:{isFetchingAllLogs:!1,fetchAllLogsError:c}}),i.abrupt("return");case 11:l&&l.data&&e({type:"GET_LOGS",payload:{isFetchingAllLogs:!1,fetchAllLogsError:!1,allLogs:n?[].concat(Object(_e.a)(n),Object(_e.a)(l.data)):l.data,noLogsLeft:!l.data.length}}),i.next=17;break;case 14:i.prev=14,i.t0=i.catch(2),e({type:"GET_LOGS",payload:{isFetchingAllLogs:!1,fetchAllLogsError:i.t0}});case 17:case"end":return i.stop()}}),null,null,[[2,14]])}));case 2:case"end":return s.stop()}}))},Se=function(){return function(e){e({type:"GET_LOGS",payload:{isFetchingAllLogs:!1,fetchAllLogsError:null,allLogs:[],noLogsLeft:!1}})}},ke=function(e){var t,a,r,n,s,o;return re.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.userId,a=e.date,r=e.timing,n=e.rating,s=e.text,o={userId:t,date:a,timing:r,rating:n,text:s},l.abrupt("return",(function(e){var t,a,r,n;return re.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,e({type:"POST_LOG",payload:{isPostingLog:!0,postLogSuccess:null,postLogError:null}}),s.next=4,re.a.awrap(he.a.post("/api/postLog",o));case 4:if(t=s.sent,a=t.data,r=a.error,n=a.success,!r&&n){s.next=10;break}return e({type:"POST_LOG",payload:{isPostingLog:!1,postLogSuccess:!1,postLogError:r||"Unknown error occured"}}),s.abrupt("return");case 10:e({type:"POST_LOG",payload:{isPostingLog:!1,postLogSuccess:!0,postLogError:null,canLog:!1}}),s.next=17;break;case 13:s.prev=13,s.t0=s.catch(0),console.error(s.t0),e({type:"POST_LOG",payload:{isPostingLog:!1,postLogSuccess:!1,postLogError:s.t0}});case 17:case"end":return s.stop()}}),null,null,[[0,13]])}));case 3:case"end":return l.stop()}}))};var Ae=function(){var e=function(){var e=Object(r.useState)(!1),t=Object(U.a)(e,2),a=t[0],n=t[1],s=Object(c.c)(),o=Object(E.f)(),l=Object(c.d)((function(e){return e.user.isAuth})),i=Object(c.d)((function(e){return e.user.loginError}));Object(r.useEffect)((function(){l&&o.push(v)}),[l,o]);var u={email:se,password:oe},m=me.a({email:me.c().required(de).email(ge),password:me.c().required(de)}),d=Object(r.useCallback)((function(e){return re.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return n(!0),t.next=3,re.a.awrap(s(ye(e)));case 3:n(!1);case 4:case"end":return t.stop()}}))}),[s]),g=Object(ne.a)({initialValues:u,validationSchema:m,onSubmit:d}),p=g.values,_=g.errors,f=g.isValid,h=g.handleChange,b=g.handleBlur,y=g.handleSubmit;return{values:p,controlEvents:{handleChange:h,handleBlur:b},errors:_,isValid:f,touched:g.touched,isLoggingIn:a,handleSubmit:y,loginError:i}}(),t=e.values,a=e.errors,s=e.isValid,o=e.controlEvents,l=e.touched,i=e.isLoggingIn,u=e.handleSubmit,m=e.loginError;return n.a.createElement(z,null,n.a.createElement(Y,null,"Log In"),n.a.createElement("form",null,n.a.createElement(Q,null,"Enter your email: "),n.a.createElement(J,{type:"email",name:"email",value:t.email,controlEvents:o}),a.email&&l.email&&n.a.createElement(X,null,a.email),n.a.createElement(Q,null,"Enter your password:"),n.a.createElement(J,{type:"password",name:"password",value:t.password,controlEvents:o}),a.password&&l.password&&n.a.createElement(X,null,a.password),n.a.createElement(K,null,n.a.createElement(F,{color:"primary",disabled:!s||i,handleClick:u},"Log In"))),m&&n.a.createElement(te,null,"Error: ",m))},je=a(79),Ie=a.n(je),Ce=a(14),Pe=a.n(Ce),Ge=function(){var e=D();return n.a.createElement("div",{className:Ie.a.container},n.a.createElement("div",{className:j()(Ie.a.button,e&&Ie.a.dark),onClick:function(){window.history.back()}},n.a.createElement(Pe.a,{name:"arrow-left"}),n.a.createElement("div",{className:Ie.a.text},"Go back")))},Ue=function(){var e=function(){var e=Object(r.useState)(!1),t=Object(U.a)(e,2),a=t[0],n=t[1],s=Object(c.c)(),o=Object(c.d)((function(e){return e.user.createUserError})),l=Object(c.d)((function(e){return e.user.createUserSuccess})),i=Object(r.useCallback)((function(e){var t;return re.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t={firstName:e.firstName,lastName:e.lastName,email:e.email,password:e.password},n(!0),a.next=4,re.a.awrap(s(be(t)));case 4:n(!1);case 5:case"end":return a.stop()}}))}),[s]),u={firstName:le,lastName:ce,email:se,password:oe,confirmPassword:ie},m=me.a({firstName:me.c().required(de),lastName:me.c().required(de),email:me.c().required(de).email(ge),password:me.c().required(de).min(6,"".concat(Ee," 6")),confirmPassword:me.c().required(de).oneOf([me.b("password"),null],pe)}),d=Object(ne.a)({initialValues:u,validationSchema:m,onSubmit:i}),g=d.values,p=d.errors,E=d.isValid,_=d.handleChange,f=d.handleBlur,h=d.handleSubmit,v=d.touched;return Object(r.useEffect)((function(){if(l){var e=g.email,t=g.password;s(ye({email:e,password:t}))}}),[g,l,s]),{values:g,controlEvents:{handleChange:_,handleBlur:f},errors:p,isValid:E,touched:v,isSigningUp:a,handleSubmit:h,createUserError:o}}(),t=e.values,a=e.controlEvents,s=e.errors,o=e.isValid,l=e.touched,i=e.isSigningUp,u=e.handleSubmit,m=e.createUserError;return n.a.createElement(r.Fragment,null,n.a.createElement(z,null,n.a.createElement(Y,null,"Sign Up"),n.a.createElement("form",null,n.a.createElement(Q,null,"Enter your first name"),n.a.createElement(J,{type:"text",name:"firstName",value:t.firstName,controlEvents:a}),s.firstName&&l.firstName&&n.a.createElement(X,null,s.firstName),n.a.createElement(Q,null,"Enter your last name"),n.a.createElement(J,{type:"text",name:"lastName",value:t.lastName,controlEvents:a}),s.lastName&&l.lastName&&n.a.createElement(X,null,s.lastName),n.a.createElement(Q,null,"Enter your email:"),n.a.createElement(J,{type:"email",name:"email",value:t.email,controlEvents:a}),s.email&&l.email&&n.a.createElement(X,null,s.email),n.a.createElement(Q,null,"Enter your password:"),n.a.createElement(J,{type:"password",name:"password",value:t.password,controlEvents:a}),s.password&&l.password&&n.a.createElement(X,null,s.password),n.a.createElement(Q,null,"Confirm your password:"),n.a.createElement(J,{type:"password",name:"confirmPassword",value:t.confirmPassword,controlEvents:a}),s.confirmPassword&&l.confirmPassword&&n.a.createElement(X,null,s.confirmPassword),n.a.createElement(K,null,n.a.createElement(F,{color:"primary",disabled:!o||i,handleClick:u},"Sign up"))),m&&n.a.createElement(te,null,"Error: ",m)),n.a.createElement(Ge,null))},Te=a(66),Be=a(67),De=a(71),Fe=a(68),Re=a(73),We=a(49),Me=a.n(We),He=a(50),Ve=a.n(He),qe=function(){return n.a.createElement("div",{className:Ve.a.loadingScreen},n.a.createElement("div",{className:Ve.a.barContainer},n.a.createElement("div",{className:Ve.a.bar}),n.a.createElement("div",{className:[Ve.a.bar,Ve.a.delay1].join(" ")}),n.a.createElement("div",{className:[Ve.a.bar,Ve.a.delay2].join(" ")})))},Ye="Morning",ze="Afternoon",Qe="Evening",Ze="Night",Je=function(){var e=new Date,t=e.getMonth()<10?"0".concat(e.getMonth()+1):"".concat(e.getMonth()+1),a=e.getDate()<10?"0".concat(e.getDate()):e.getDate();return[e.getFullYear(),t,a].join("-")},Ke=function(){var e=(new Date).getHours();return e>=7&&e<=12?Ye:e>12&&e<=19?ze:e>19&&e<=23?Qe:e<7?Ze:null},Xe=function(e){function t(){return Object(Te.a)(this,t),Object(De.a)(this,Object(Fe.a)(t).apply(this,arguments))}return Object(Re.a)(t,e),Object(Be.a)(t,[{key:"componentWillMount",value:function(){var e=Je(),t=Ke();this.props.dispatch(we(e,t,this.props.userId))}},{key:"returnTimeRemaining",value:function(){var e=0;switch(Ke()){case Ye:e=13;break;case ze:e=20;break;case Qe:e=7;break;default:e=7}return"".concat(e,":00")}},{key:"render",value:function(){var e=this.props,t=e.canLog,a=e.darkTheme;return void 0===t?n.a.createElement(qe,null):t&&Ke()!==Ze?n.a.createElement(l.b,{to:b},n.a.createElement("div",{className:j()(Me.a.logbutton,Me.a.available,a&&Me.a.dark)},n.a.createElement("div",{className:Me.a.attentionBorder}),n.a.createElement(Pe.a,{name:"fas fa-plus",className:Me.a.floating})," ADD LOG")):n.a.createElement("div",{className:j()(Me.a.logbutton,Me.a.unavailable)},"Next log will be available at: ",this.returnTimeRemaining())}}]),t}(r.Component);var $e=Object(c.b)((function(e){var t=e.logs,a=e.user.id;return{canLog:t.canLog,userId:a}}))(Xe),et=a(10),tt=a.n(et),at=a(25),rt=a.n(at),nt=function(){var e=D(),t=Object(c.d)((function(e){var t=e.logs;return{lastLogs:t.lastLogs,isFetchingLogs:t.isFetchingLogs}})),a=t.lastLogs,r=t.isFetchingLogs;return n.a.createElement("div",{className:tt.a.gridItem},n.a.createElement("h3",{className:tt.a.gridItemHeader},"Last logs"),r?n.a.createElement(qe,null):a&&a.length?n.a.createElement("div",{className:j()(rt.a.logSection,tt.a.gridItemContent)},n.a.createElement("div",{className:rt.a.logContainer},a.slice(0,3).map((function(t,a){return n.a.createElement("div",{key:a,className:rt.a.logItem},n.a.createElement("div",{className:rt.a.logContent},n.a.createElement("div",{className:j()(rt.a.ratingBox,e&&rt.a.dark)},t.rating),n.a.createElement("div",{className:rt.a.rightSection},n.a.createElement("div",{className:rt.a.date},t.date),n.a.createElement("div",{className:rt.a.text},t.text))),n.a.createElement(l.b,{to:"/logs/".concat(t.id),className:j()(rt.a.link,e&&rt.a.dark)},"Read more"))}))),n.a.createElement(l.b,{to:"/logs"},n.a.createElement(F,null,"All Logs"))):n.a.createElement("div",{className:rt.a.greyText},"There are no logs at the moment ",n.a.createElement("br",null),n.a.createElement("br",null),"Write Your first one, by pressing the green button at the top"))},st=a(80),ot=a.n(st),lt=function(){var e=D(),t=function(){var e=Object(c.d)((function(e){var t=e.logs;return{lastLogs:t.lastLogs,isFetchingLogs:t.isFetchingLogs}})),t=e.lastLogs,a=e.isFetchingLogs,n=Object(r.useMemo)((function(){if(!t||!Array.isArray(t)||!t.length)return"N/A";var e=0,a=0;t.forEach((function(t){e+=parseInt(t.rating),a++}));var r=Math.round(e/a*10/10);return Number.isInteger(r)?"".concat(r,".0"):String(r)}),[t]),s=Object(r.useMemo)((function(){if(!t||!Array.isArray(t)||!t.length||"N/A"===n)return"";var e=parseInt(n);return e>=7.5?"Great":e>=5?"Good":e>=3?"Average":e<3?"Bad":""}),[t,n]);return{rating:n,ratingText:s,lastLogs:t,isFetchingLogs:a}}(),a=t.rating,s=t.ratingText,o=t.isFetchingLogs;return n.a.createElement("div",{className:j()(tt.a.gridItem,ot.a.statusContainer)},o?n.a.createElement(qe,null):n.a.createElement(r.Fragment,null,n.a.createElement("h3",{className:tt.a.gridItemHeader},"Latest mood status"),n.a.createElement("div",{className:tt.a.gridItemContent},n.a.createElement("div",{className:j()(ot.a.statusBox,e&&ot.a.dark)},a),n.a.createElement("div",{className:ot.a.statusText},s),n.a.createElement(l.b,{to:"/stats"},n.a.createElement(F,null,"Stats")))))},ct=a(97),it=a.n(ct),ut=function(){var e=D();return n.a.createElement("div",{className:j()(tt.a.gridItem,tt.a.shrink)},n.a.createElement("h3",{className:tt.a.gridItemHeader},"Settings"),n.a.createElement("div",{className:tt.a.flexCenter},n.a.createElement("div",{className:it.a.settingsIconWrapper},n.a.createElement(l.b,{to:N},n.a.createElement(Pe.a,{name:"cog",className:j()(it.a.settingsIcon,e&&it.a.dark)})))))},mt=a(98),dt=a.n(mt),gt=function(){var e=D();return n.a.createElement("div",{className:j()(tt.a.gridItem,tt.a.shrink)},n.a.createElement("h3",{className:tt.a.gridItemHeader},"Log out"),n.a.createElement("div",{className:tt.a.flexCenter},n.a.createElement(l.b,{to:h},n.a.createElement("div",{className:dt.a.logoutIconWrapper},n.a.createElement(Pe.a,{name:"sign-out",className:j()(dt.a.logoutIcon,e&&dt.a.dark)})))))},pt=function(){var e=D(),t=Object(c.d)((function(e){return e.user.isAuth})),a=Object(c.d)((function(e){return e.user.id})),s=Object(c.c)();return Object(r.useEffect)((function(){a&&s(function(e){var t,a,r,n;return re.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.userId,a=e.limit,r=void 0===a?9:a,n="/api/getLogs?id=".concat(t,"&limit=").concat(r),s.abrupt("return",(function(e){var t,a,r,s;return re.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e({type:"GET_LAST_LOGS",payload:{lastLogs:[],logFetchError:null,isFetchingLogs:!0}}),o.next=3,re.a.awrap(he.a.get(n));case 3:if(t=o.sent,a=t.data,r=a.success,!(s=a.error)){o.next=9;break}return e({type:"GET_LAST_LOGS",payload:{lastLogs:[],logFetchError:s,isFetchingLogs:!1}}),o.abrupt("return");case 9:if(!r||!a.data){o.next=12;break}return e({type:"GET_LAST_LOGS",payload:{lastLogs:a.data,logFetchError:null,isFetchingLogs:!1}}),o.abrupt("return");case 12:e({type:"GET_LAST_LOGS",payload:{lastLogs:[],logFetchError:null,isFetchingLogs:!1}});case 13:case"end":return o.stop()}}))}));case 3:case"end":return s.stop()}}))}({userId:a,limit:9}))}),[a,s]),void 0===t?n.a.createElement(M,null):t?n.a.createElement("div",null,n.a.createElement($e,{darkTheme:e}),n.a.createElement("div",{className:tt.a.grid},n.a.createElement("h1",{className:tt.a.gridTop},"Your dashboard"),n.a.createElement(nt,null),n.a.createElement(lt,null),n.a.createElement(ut,null),n.a.createElement(gt,null))):void 0},Et=a(76),_t=a.n(Et),ft=function(){var e=function(){var e=Object(c.c)(),t=Object(c.d)((function(e){return e.user.id})),a=Object(c.d)((function(e){var t=e.logs;return{postLogSuccess:t.postLogSuccess,postLogError:t.postLogError,canLog:t.canLog}})),n=a.postLogSuccess,s=a.postLogError,o=a.canLog,l=Object(r.useState)(""),i=Object(U.a)(l,2),u=i[0],m=i[1],d=Object(r.useState)(5),g=Object(U.a)(d,2),p=g[0],_=g[1],f=Object(r.useState)(!1),h=Object(U.a)(f,2),b=h[0],y=h[1],N=Object(E.f)();Object(r.useEffect)((function(){t&&e(we(Je(),Ke(),t))}),[t,e]);var x=Object(r.useCallback)((function(e){_(Number(e.target.value))}),[]),L=Object(r.useCallback)((function(e){m(e.target.value)}),[]),w=Object(r.useCallback)((function(){return re.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!p||!t){a.next=5;break}return y(!0),a.next=4,re.a.awrap(e(ke({userId:t,date:Je(),timing:Ke(),rating:p,text:u})));case 4:y(!1);case 5:case 6:case"end":return a.stop()}}))}),[t,p,u,e]);Object(r.useEffect)((function(){n&&(e({type:"POST_LOG",payload:{isPostingLog:!1,postLogSuccess:null,postLogError:null}}),N.push(v))}),[n,e,N]),Object(r.useEffect)((function(){!1===o&&N.push(v)}),[o,e,N]);return{returnMoodText:function(e){return e>=9?"Awesome!":e>=7?"Good":e>=5?"Average":e>=3?"Not well":e<3?"Bad":""},postLogError:s,canLog:o,message:u,moodRating:p,isPostingLog:b,handleRangeInput:x,handleMessageInput:L,handleAddLog:w}}(),t=e.returnMoodText,a=e.postLogError,s=e.canLog,o=e.message,l=e.moodRating,i=e.isPostingLog,u=e.handleRangeInput,m=e.handleMessageInput,d=e.handleAddLog;return void 0===s?n.a.createElement(M,null):s?n.a.createElement(r.Fragment,null,n.a.createElement(z,null,n.a.createElement(Y,null,"Add log"),n.a.createElement("span",null,"How do you feel at the moment? Rate your mood:"),n.a.createElement("div",{className:_t.a.topSection},n.a.createElement("div",{className:_t.a.moodBox},l),n.a.createElement("div",{className:_t.a.inputLine},n.a.createElement(Pe.a,{className:_t.a.thumb,name:"thumbs-down",style:{color:"#800000"}}),n.a.createElement("input",{onChange:u,type:"range",min:"1",max:"10",value:l}),n.a.createElement(Pe.a,{className:_t.a.thumb,name:"thumbs-up",style:{color:"#16774f"}})),n.a.createElement("span",null,t(l))),n.a.createElement(Q,null,"Describe your thoughts: (optional)"),n.a.createElement(J,{type:"textarea",name:"message",value:o,controlEvents:{handleChange:m}}),n.a.createElement(K,null,n.a.createElement(F,{handleClick:d,disabled:i},"Submit")),a&&n.a.createElement(te,null,a)),n.a.createElement(Ge,null)):null},ht=a(102),vt=a.n(ht),bt=a(51),yt=a.n(bt),Nt=function(e){var t=e.date,a=e.timing,r=e.text,s=e.rating;return n.a.createElement("div",{className:yt.a.item},n.a.createElement("div",{className:yt.a.top_line},n.a.createElement("div",{className:yt.a.rating_box},s),n.a.createElement("div",null,n.a.createElement(Pe.a,{name:"hourglass",className:yt.a.icon}),a),n.a.createElement("div",{className:yt.a.date},n.a.createElement(Pe.a,{name:"calendar",className:yt.a.icon}),t)),n.a.createElement("div",{className:yt.a.text},r))},xt=function(){var e=function(){var e=Object(c.c)(),t=Object(c.d)((function(e){return{user:e.user,logs:e.logs}})),a=t.user,n=t.logs,s=Object(r.useState)(3),o=Object(U.a)(s,2),l=o[0],i=o[1],u=a.id,m=n.allLogs,d=n.isFetchingAllLogs,g=n.fetchAllLogsError,p=n.noLogsLeft;Object(r.useEffect)((function(){u&&e(Oe({userId:u,start:0,limit:3}))}),[u,e]),Object(r.useEffect)((function(){return function(){e(Se())}}),[]);var E=Object(r.useCallback)((function(){u&&(e(Oe({userId:u,start:l,limit:3,currentLogs:m})),i((function(e){return e+3})))}),[l,u,m,e]);return{allLogs:m,isFetchingAllLogs:d,fetchAllLogsError:g,noLogsLeft:p,loadMoreLogs:E}}(),t=e.allLogs,a=e.isFetchingAllLogs,s=e.fetchAllLogsError,o=e.noLogsLeft,l=e.loadMoreLogs;return t?t&&Array.isArray&&t.length?n.a.createElement("div",{className:vt.a.pageWrapper},n.a.createElement(Ge,null),n.a.createElement("h1",null,"All logs"),n.a.createElement("div",null,t.map((function(e,t){return n.a.createElement(Nt,{key:t,rating:e.rating,date:e.date,timing:e.timing,text:e.text})}))),n.a.createElement("div",{className:vt.a.bottomSection},a?n.a.createElement(qe,null):!o&&n.a.createElement(F,{handleClick:l},"Load more"),s&&n.a.createElement(te,null,s))):void 0:n.a.createElement(M,null)},Lt=a(125),wt=a.n(Lt),Ot=function(e){var t=Object(c.c)(),a=Object(c.d)((function(e){return e.logs})),s=a.logData,o=a.isFetchingLog,l=a.getLogError;return Object(r.useEffect)((function(){var a;return e.match&&e.match.params&&e.match.params.id&&t((a=e.match.params.id,re.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(function(e){var t,r,n,s;return re.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t="/api/getLog?id=".concat(a),e({type:"GET_LOG",payload:{isFetchingLog:!0,getLogError:null,logData:{}}}),o.prev=2,o.next=5,re.a.awrap(he.a.get(t));case 5:if(r=o.sent,n=r.data,!(s=r.error)){o.next=11;break}return e({type:"GET_LOG",payload:{isFetchingLog:!1,getLogError:s,logData:{}}}),o.abrupt("return");case 11:e({type:"GET_LOG",payload:{isFetchingLog:!1,getLogError:!1,logData:n&&n.data?n.data:{}}}),o.next=18;break;case 14:o.prev=14,o.t0=o.catch(2),console.error(o.t0),e({type:"GET_LOG",payload:{isFetchingLog:!1,getLogError:o.t0,logData:{}}});case 18:case"end":return o.stop()}}),null,null,[[2,14]])}));case 1:case"end":return e.stop()}})))),function(){t((function(e){e({type:"GET_LOG",payload:{isFetchingLog:!1,getLogError:null,logData:{}}})}))}}),[]),!s||o?n.a.createElement(M,null):n.a.createElement("div",{className:wt.a.pageWrapper},n.a.createElement(Ge,null),s&&Boolean(Object.keys(s).length)&&n.a.createElement(Nt,{rating:s.rating,timing:s.timing,date:s.date,text:s.text}),l&&n.a.createElement(te,null,l))},St=function(e){function t(){return Object(Te.a)(this,t),Object(De.a)(this,Object(Fe.a)(t).apply(this,arguments))}return Object(Re.a)(t,e),Object(Be.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.dispatch(function(){var e=he.a.get("/api/logout");return function(t){e.then((function(e){200===e.status&&(ve.remove("auth"),t({type:"CLEAR_USER",payload:{}}),Se(),t({type:"CAN_LOG",payload:null}))}))}}())}},{key:"render",value:function(){return n.a.createElement(M,null)}}]),t}(r.Component),kt=Object(c.b)(null)(St),At=a(126),jt=a.n(At),It=function(e){var t=e.children;return n.a.createElement("div",{className:jt.a.container},t)},Ct=a(69),Pt=a.n(Ct),Gt=function(e){var t=e.email,a=function(e){var t=e.firstName,a=e.lastName,n=Object(r.useState)(!1),s=Object(U.a)(n,2),o=s[0],l=s[1],i=Object(c.c)(),u=Object(c.d)((function(e){return e.user})),m=u.id,d=u.isEditingUser,g=u.editUserError,p=u.editUserSuccess;Object(r.useEffect)((function(){return function(){i((function(e){e({type:"EDIT_USER",payload:{isEditingUser:!1,editUserSuccess:null,editUserError:null}})}))}}),[]);var E=me.a({firstName:me.c().required(de),lastName:me.c().required(de)}),_={firstName:t,lastName:a},f=Object(ne.a)({initialValues:_,validationSchema:E,enableReinitialize:!0,onSubmit:function(e){return re.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!0),t.next=3,re.a.awrap(i(Ne({userId:m,details:e})));case 3:l(!1);case 4:case"end":return t.stop()}}))}}),h=f.values,v=f.errors,b=f.touched,y=f.isValid,N=f.handleBlur,x=f.handleChange;return{isSubmitting:o,isEditingUser:d,editUserError:g,editUserSuccess:p,values:h,errors:v,touched:b,isValid:y,handleSubmit:f.handleSubmit,controlEvents:{handleChange:x,handleBlur:N}}}({firstName:e.firstName,lastName:e.lastName}),s=a.isSubmitting,o=a.isEditingUser,l=a.editUserError,i=a.editUserSuccess,u=a.values,m=a.errors,d=a.touched,g=a.isValid,p=a.handleSubmit,E=a.controlEvents;return n.a.createElement(z,null,n.a.createElement("div",null,n.a.createElement("strong",null,"User: ")," ",t),n.a.createElement("br",null),n.a.createElement("h3",{className:Pt.a.miniHeader},"Edit details:"),n.a.createElement(Q,null,"First name:"),n.a.createElement(J,{name:"firstName",value:u.firstName,controlEvents:E}),m.firstName&&d.firstName&&n.a.createElement(X,null,m.firstName),n.a.createElement(Q,null,"Last name:"),n.a.createElement(J,{name:"lastName",value:u.lastName,controlEvents:E}),m.lastName&&d.lastName&&n.a.createElement(X,null,m.lastName),n.a.createElement(K,null,n.a.createElement(F,{disabled:s||!g||o,handleClick:p},"Save changes")),!o&&l&&n.a.createElement(te,null,l),!o&&i&&n.a.createElement(It,null,"Account information was saved"))},Ut=function(e){e.userId;var t=function(){var e=Object(r.useState)(!1),t=Object(U.a)(e,2),a=t[0],n=t[1],s=Object(c.c)(),o=Object(c.d)((function(e){return e.user})),l=o.changePasswordSuccess,i=o.changePasswordError,u=o.id;Object(r.useEffect)((function(){return function(){s(Le())}}),[]);var m=me.a({currentPassword:me.c().required(de),password:me.c().required(de).min(6,"".concat(Ee," 6")),confirmPassword:me.c().required(de).oneOf([me.b("password"),null],pe)}),d={currentPassword:ue,password:oe,confirmPassword:ie},g=Object(ne.a)({initialValues:d,validationSchema:m,onSubmit:function(e){var t,a;return re.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.currentPassword,a=e.password,n(!0),r.next=4,re.a.awrap(s(xe({userId:u,currentPassword:t,newPassword:a})));case 4:n(!1);case 5:case"end":return r.stop()}}))}}),p=g.values,E=g.errors,_=g.isValid,f=g.touched;return{values:p,controlEvents:{handleChange:g.handleChange,handleBlur:g.handleBlur},errors:E,isValid:_,touched:f,isSubmitting:a,handleSubmit:g.handleSubmit,changePasswordSuccess:l,changePasswordError:i}}(),a=t.values,s=t.controlEvents,o=t.errors,l=t.isValid,i=t.isSubmitting,u=t.handleSubmit,m=t.touched,d=t.changePasswordSuccess,g=t.changePasswordError;return n.a.createElement(z,null,n.a.createElement("h3",{className:Pt.a.miniHeader},"Change password"),n.a.createElement(Q,null,"Current password:"),n.a.createElement(J,{type:"password",name:"currentPassword",controlEvents:s,value:a.currentPassword}),n.a.createElement(Q,null,"New password:"),n.a.createElement(J,{type:"password",name:"password",controlEvents:s,value:a.password}),m.password&&o.password&&n.a.createElement(X,null,o.password),n.a.createElement(Q,null,"Confirm new password:"),n.a.createElement(J,{type:"password",name:"confirmPassword",controlEvents:s,value:a.confirmPassword}),m.confirmPassword&&o.confirmPassword&&n.a.createElement(X,null,o.confirmPassword),n.a.createElement(K,null,n.a.createElement(F,{disabled:!l||i,handleClick:u},"Change password")),g&&n.a.createElement(te,null,g),d&&n.a.createElement(It,null,"Password was changed successfully"))},Tt=function(){var e=Object(c.d)((function(e){return e.user})),t=e.email,a=e.firstName,r=e.lastName;return e&&Object.keys(e).length?n.a.createElement("div",null,n.a.createElement(Ge,null),n.a.createElement(Y,null,"Account settings"),n.a.createElement(Gt,{email:t,firstName:a,lastName:r}),n.a.createElement("br",null),n.a.createElement(Ut,null),n.a.createElement("br",null),n.a.createElement(z,null,n.a.createElement("h3",{className:Pt.a.miniHeader},"Delete account"),n.a.createElement(K,null,n.a.createElement(l.b,{to:w},n.a.createElement(F,null,"Delete account"))))):n.a.createElement(M,null)},Bt=a(52),Dt=a.n(Bt);var Ft=function(e){var t=e.points,a=D();return n.a.createElement("polyline",{points:t,className:j()(Dt.a.graph_stroke,a&&Dt.a.dark)})},Rt=function(e){var t=e.logs,a=Object(r.useState)(0),s=Object(U.a)(a,2),o=s[0],l=s[1],c=Object(r.useRef)(null),i=function(){var e=0;(e=c.current&&c.current.offsetWidth?c.current.offsetWidth:490)!==o&&l(e)};Object(r.useEffect)((function(){return window.addEventListener("resize",i),!o&&c.current&&c.current.offsetWidth&&l(c.current.offsetWidth),function(){window.removeEventListener("resize",i)}}),[]);var u=function(e){if(!e||!Array.isArray(e)||!e.length)return null;for(var t=[],a=0;a<e.length;a++){var r=e[a],n=r.date,s=r.rating;if(t.push({date:n,rating:s}),20===a)break}return t}(t);if(!u||!u.length)return null;var m=u[0].date,d=u[u.length-1].date;return n.a.createElement("div",{className:Dt.a.graph_container},n.a.createElement("p",null,n.a.createElement("strong",null,"Your mood graph")),n.a.createElement("div",{className:Dt.a.graph_canvas,ref:c},n.a.createElement("div",{className:Dt.a.y_axis_number},"10"),n.a.createElement("div",{className:Dt.a.y_axis_number,style:{transform:"translate(10px, 100px)"}},"5"),n.a.createElement("div",{className:Dt.a.y_axis_number,style:{transform:"translate(10px, 200px)"}},"0"),n.a.createElement("svg",{width:"100%",height:"100%"},n.a.createElement("polyline",{points:"1,20 490,20",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),n.a.createElement("polyline",{points:"1,40 490,40",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),n.a.createElement("polyline",{points:"1,60 490,60",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),n.a.createElement("polyline",{points:"1,80 490,80",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),n.a.createElement("polyline",{points:"1,100 490,100",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),n.a.createElement("polyline",{points:"1,120 490,120",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),n.a.createElement("polyline",{points:"1,140 490,140",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),n.a.createElement("polyline",{points:"1,160 490,160",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),n.a.createElement("polyline",{points:"1,180 490,180",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),n.a.createElement("polyline",{points:"1,200 490,200",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),n.a.createElement(Ft,{points:function(e){for(var t="",a=0;a<e.length;a++){var r=220-20*Number(e[a].rating);t+=Math.floor(o/21*(e.length-a-1))+","+r+" "}return t}(u)}))),n.a.createElement("div",null,"From ",d," to ",m))},Wt=a(15),Mt=a.n(Wt),Ht=a(127),Vt=a.n(Ht),qt=a(128),Yt=a.n(qt),zt=a(129),Qt=a.n(zt),Zt=function(e,t,a){return"N/A"===e?null:n.a.createElement("div",{className:j()(Mt.a.daytime_bullet,a&&Mt.a.dark),style:{bottom:"".concat(30*e-10,"px"),left:"".concat(t)}},n.a.createElement("div",{className:Mt.a.daytime_bullet_text},e))},Jt=function(e){var t=e.logs,a=function(e){for(var t=0,a=0,r=0,n=0,s=0,o=0,l=0;l<e.length;l++)"Morning"===e[l].timing&&(t+=Number(e[l].rating),a++),"Afternoon"===e[l].timing&&(r+=Number(e[l].rating),n++),"Evening"===e[l].timing&&(s+=Number(e[l].rating),o++);return{morningAverage:0===a?"N/A":Math.floor(10*t/a)/10,afternoonAverage:0===n?"N/A":Math.floor(10*r/n)/10,eveningAverage:0===o?"N/A":Math.floor(10*s/o)/10}}(t),r=D();if(!t||!t.length||!a)return null;var s=a.morningAverage,o=a.afternoonAverage,l=a.eveningAverage;return n.a.createElement("div",{className:Mt.a.daytime_container},n.a.createElement("p",null,n.a.createElement("strong",null,"Your mood throughout the day:")),n.a.createElement("div",{className:Mt.a.daytime_canvas},n.a.createElement("svg",{width:"100%",height:"100%",overflow:"hidden"},n.a.createElement("polyline",{points:"1,60 300,60",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),n.a.createElement("polyline",{points:"1,120 300,120",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),n.a.createElement("polyline",{points:"1,180 300,180",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),n.a.createElement("polyline",{points:"1,240 300,240",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),n.a.createElement("polyline",{points:"1,300 300,300",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}})),Zt(s,null,r),Zt(o,"48%",r),Zt(l,"82%",r),n.a.createElement("div",{className:Mt.a.y_axis_number_daytime,style:{top:"-12px"}},"10"),n.a.createElement("div",{className:Mt.a.y_axis_number_daytime,style:{top:"48px",left:"-15px"}},"8"),n.a.createElement("div",{className:Mt.a.y_axis_number_daytime,style:{top:"108px",left:"-15px"}},"6"),n.a.createElement("div",{className:Mt.a.y_axis_number_daytime,style:{top:"168px",left:"-15px"}},"4"),n.a.createElement("div",{className:Mt.a.y_axis_number_daytime,style:{top:"228px",left:"-15px"}},"2"),n.a.createElement("div",{className:Mt.a.daytime_bottom_line},n.a.createElement("div",{className:Mt.a.daytime_time},"7:00"),n.a.createElement("div",{className:Mt.a.daytime_time,style:{left:"33%"}},"13:00"),n.a.createElement("div",{className:Mt.a.daytime_time,style:{left:"66%"}},"20:00"),n.a.createElement("div",{className:Mt.a.daytime_time,style:{left:"100%"}},"00:00"),n.a.createElement("img",{src:Vt.a,style:{left:"13%",padding:"2px"},alt:"Morning",className:j()(r&&Mt.a.dark)}),n.a.createElement("img",{src:Yt.a,style:{left:"48%"},alt:"Afternoon",className:j()(r&&Mt.a.dark)}),n.a.createElement("img",{src:Qt.a,style:{left:"82%"},alt:"Evenining",className:j()(r&&Mt.a.dark)}))))},Kt=a(56),Xt=a.n(Kt),$t=a(103),ea=a.n($t),ta=function(e){var t=e.children,a=D();return n.a.createElement("div",{className:j()(ea.a.averageBox,a&&ea.a.dark)},t)},aa=function(){var e=Object(c.c)(),t=Object(c.d)((function(e){return{user:e.user,logs:e.logs}})),a=t.user,s=t.logs,o=a.id,l=s.allLogs,i=s.fetchAllLogsError,u=s.isFetchingAllLogs;if(Object(r.useEffect)((function(){o&&e(Oe({userId:o,limit:100}))}),[o,e]),Object(r.useEffect)((function(){return function(){e(Se())}}),[e]),u||!o||!l)return n.a.createElement(M,null);if(i)return n.a.createElement(te,null,i);var m=function(e){if(!e||!Array.isArray(e)||!e.length)return{};for(var t=[],a=0,r=0,n=0;n<e.length;n++){var s=e[n].date;if(t.indexOf(s)<0&&t.push(e[n].date),a+=Number(e[n].rating),r++,t.length>=7)break}return{average:Math.floor(10*a/r)/10,firstDay:t[t.length-1]?t[t.length-1]:"N/A",lastDay:t[0]?t[0]:"N/A"}}(l);return l&&Array.isArray(l)&&l.length?n.a.createElement(r.Fragment,null,n.a.createElement(Ge,null),n.a.createElement("div",{className:Xt.a.container},n.a.createElement("h1",null,"User stats"),n.a.createElement("div",{className:Xt.a.first_block},n.a.createElement("div",{className:Xt.a.average_block},n.a.createElement("p",null,n.a.createElement("strong",null,"Your average mood:")),n.a.createElement(ta,null,function(e){if(!e||!Array.isArray(e)||!e.length)return null;var t=0;return e.forEach((function(e){e&&e.rating&&(t+=Number(e.rating))})),Math.floor(10*t/e.length)/10}(l)),n.a.createElement("div",{className:Xt.a.small_text_box},"Retrieved from the last 100 logs")),n.a.createElement("div",{className:Xt.a.average_block},n.a.createElement("b",null,"7 day mood:"),n.a.createElement(ta,null,m.average),n.a.createElement("div",{className:Xt.a.small_text_box},"Counted from the last 7 active days from ",n.a.createElement("br",null),m.firstDay," to ",m.lastDay))),n.a.createElement(Rt,{logs:l}),n.a.createElement(Jt,{logs:l}))):void 0},ra=function(){var e=function(){var e=Object(r.useState)({isDeleting:!1,error:null,success:null}),t=Object(U.a)(e,2),a=t[0],n=t[1],s=a.isDeleting,o=a.success,l=a.error,i=Object(c.d)((function(e){return e.user.id})),u=Object(E.f)(),m=Object(c.c)();Object(r.useEffect)((function(){if(o){re.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.awrap(m(re.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(function(e){e({type:"CLEAR_USER",payload:{}})}));case 1:case"end":return e.stop()}}))));case 2:case"end":return e.stop()}})),u.push(_)}}),[o]);var d={password:oe,confirmPassword:ie},p=me.a({password:me.c().required(de),confirmPassword:me.c().oneOf([me.b("password"),null],pe)}),f=Object(ne.a)({initialValues:d,validationSchema:p,onSubmit:function(e){var t,a,r,s,o,l;return re.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.password,i){c.next=3;break}return c.abrupt("return");case 3:return n((function(e){return Object(g.a)({},e,{isDeleting:!0})})),a="api/deleteAccount?id=".concat(i),r={password:t},c.prev=6,c.next=9,re.a.awrap(he.a.post(a,r));case 9:if(s=c.sent,o=s.data,!(l=o.error)){c.next=15;break}return n({isDeleting:!1,error:l,success:!1}),c.abrupt("return");case 15:n({isDeleting:!1,error:null,success:!0}),c.next=22;break;case 18:c.prev=18,c.t0=c.catch(6),console.error(c.t0),n({isDeleting:!1,error:c.t0,success:!1});case 22:case"end":return c.stop()}}),null,null,[[6,18]])}}),h=f.values,v=f.errors,b=f.isValid,y=f.handleChange,N=f.handleBlur,x=f.handleSubmit;return{values:h,errors:v,isValid:b,controlEvents:{handleChange:y,handleBlur:N},touched:f.touched,handleSubmit:x,isDeleting:s,error:l}}(),t=e.values,a=e.errors,s=e.isValid,o=e.controlEvents,l=e.touched,i=e.handleSubmit,u=e.isDeleting,m=e.error;return n.a.createElement(r.Fragment,null,n.a.createElement(Ge,null),n.a.createElement(z,null,n.a.createElement(te,null,n.a.createElement("strong",null,"Warning: ")," deleting your account will permanently delete all your data, including all logs stored in the database."),n.a.createElement("br",null),n.a.createElement(Y,null,"Delete account:"),n.a.createElement(Q,null,"Enter your passsword:"),n.a.createElement(J,{name:"password",value:t.password,type:"password",controlEvents:o}),l.password&&a.password&&n.a.createElement(X,null,a.password),n.a.createElement(Q,null,"Confirm your password:"),n.a.createElement(J,{name:"confirmPassword",value:t.confirmPassword,type:"password",controlEvents:o}),l.confirmPassword&&a.confirmPassword&&n.a.createElement(X,null,a.confirmPassword),n.a.createElement(K,null,n.a.createElement(F,{disabled:!s||u,handleClick:i},"Delete account")),m&&!u&&n.a.createElement(te,null,m)))},na=a(33),sa=a.n(na),oa=a(81),la=a.n(oa),ca=[{iconName:"home",path:"/",text:"Home",isAuth:null},{iconName:"sign-in",path:"/login",text:"Log In",isAuth:!1},{iconName:"sign-out",path:"/logout",text:"Log Out",isAuth:!0},{iconName:"user-plus",path:"/register",text:"Sign Up",isAuth:null},{iconName:"book",path:"/dashboard",text:"Your Dashboard",isAuth:!0},{iconName:"cog",path:"/settings",text:"Settings",isAuth:!0}],ia=function(e){var t=e.isAuth,a=e.toggleNav,r=D(),s=function(e,t){return n.a.createElement(l.b,{to:e.path,key:t},n.a.createElement("div",{className:la.a.navItem,onClick:a},n.a.createElement(Pe.a,{name:e.iconName})," ",e.text))};return n.a.createElement("div",null,n.a.createElement("div",{className:j()(la.a.navBar,r&&la.a.nightMode)},function(e){return e.map((function(e,a){return t&&e.isAuth?s(e,a):t||!1!==e.isAuth?null===e.isAuth?s(e,a):null:s(e,a)}))}(ca)),n.a.createElement("div",{className:la.a.navBarMask,onClick:a}))},ua=function(e){var t=e.showNav,a=e.toggleNav;return n.a.createElement("div",{className:sa.a.bars},t?n.a.createElement(Pe.a,{name:"close",onClick:a,style:{fontSize:"1.5em",padding:"2px",color:"#f2f2f2",transform:"rotate(90deg)",transition:"0.5s"}}):n.a.createElement(Pe.a,{name:"bars",onClick:a,style:{fontSize:"1.5em",padding:"2px",color:"#f2f2f2",transform:"rotate(180deg)",transition:"0.5s"}}))},ma=a(130),da=a(105),ga=function(e){var t=e.updateTheme,a=e.darkTheme;return n.a.createElement("div",{className:sa.a.nightmode_button,onClick:t},n.a.createElement(ma.a,{icon:a?da.b:da.a,style:{fontSize:"1.5rem"}}),n.a.createElement("div",{className:sa.a.nightmode_button_caption},a?"Day mode":"Night mode"))};var pa=Object(c.b)((function(e){return{isAuth:e.user.isAuth}}))((function(e){var t=e.isAuth,a=D(),s=Object(r.useContext)(B),o=function(){var e=Object(r.useState)(!1),t=Object(U.a)(e,2),a=t[0],n=t[1],s=Object(r.useCallback)((function(){n(!a)}),[a]);return{showNav:a,toggleNav:s}}(),l=o.showNav,c=o.toggleNav;return n.a.createElement("div",{className:sa.a.header},n.a.createElement("div",{className:j()(sa.a.top,a&&sa.a.nightMode),style:a?{backgroundColor:"#2F2F2F"}:{}},n.a.createElement("div",{className:sa.a.logo},"Moodapp"),n.a.createElement(ua,{showNav:l,toggleNav:c}),n.a.createElement(ga,{updateTheme:s,darkTheme:a})),l&&n.a.createElement(ia,{toggleNav:c,isAuth:t}))})),Ea=function(e,t){var a=function(a){function r(){return Object(Te.a)(this,r),Object(De.a)(this,Object(Fe.a)(r).apply(this,arguments))}return Object(Re.a)(r,a),Object(Be.a)(r,[{key:"UNSAFE_componentWillMount",value:function(){this.props.dispatch({type:"USER_AUTH",payload:he.a.get("/api/auth").then((function(e){return e.data}))})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var a=e.user;a&&a.isAuth?a.isAuth&&!1===t&&this.props.history.push("/dashboard"):t&&this.props.history.push("/login")}},{key:"render",value:function(){return n.a.createElement(e,Object.assign({},this.props,{user:this.props.user}))}}]),r}(r.Component);return Object(c.b)((function(e){return{user:e.user}}))(a)},_a=function(){return n.a.createElement(r.Fragment,null,n.a.createElement(pa,null),n.a.createElement("div",{className:"content_wrapper"},n.a.createElement(E.c,null,n.a.createElement(E.a,{path:_,exact:!0,component:Ea(H,null)}),n.a.createElement(E.a,{path:f,exact:!0,component:Ea(Ae,!1)}),n.a.createElement(E.a,{path:y,exact:!0,component:Ea(Ue,null)}),n.a.createElement(E.a,{path:v,exact:!0,component:Ea(pt,!0)}),n.a.createElement(E.a,{path:b,exact:!0,component:Ea(ft,!0)}),n.a.createElement(E.a,{path:x,exact:!0,component:Ea(xt,!0)}),n.a.createElement(E.a,{path:L,exact:!0,component:Ea(Ot,!0)}),n.a.createElement(E.a,{path:h,exact:!0,component:Ea(kt,!0)}),n.a.createElement(E.a,{path:N,exact:!0,component:Ea(Tt,!0)}),n.a.createElement(E.a,{path:w,exact:!0,component:Ea(ra,!0)}),n.a.createElement(E.a,{path:O,exact:!0,component:Ea(aa,!0)}))))},fa=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,ha=Object(i.e)(p,{},fa(Object(i.a)(m.a,d.a)));o.a.render(n.a.createElement(c.a,{store:ha},n.a.createElement((function(e){var t=e.children,a=Object(r.useState)(function(){var e=localStorage.getItem("nightmode");return void 0!==e&&"true"===e}()),s=Object(U.a)(a,2),o=s[0],l=s[1];return Object(r.useEffect)((function(){!0===o?(document.body.style.background="rgb(51, 51, 51)",document.body.style.color="rgb(242,242,242"):(document.body.style.background="#FFFFFF",document.body.style.color="#000000")}),[o]),n.a.createElement(T.Provider,{value:o},n.a.createElement(B.Provider,{value:function(){l((function(e){return localStorage.setItem("nightmode",!e),!e}))}},t))}),null,n.a.createElement(l.a,null,n.a.createElement(_a,null)))),document.getElementById("root"))},22:function(e,t,a){e.exports={formWrapper:"Forms_formWrapper__3d4zz",heading:"Forms_heading__1-XCC",label:"Forms_label__1bGpV",textInput:"Forms_textInput__2cyw7",errorMessage:"Forms_errorMessage__1GA70",formFooter:"Forms_formFooter__2yMAt",textArea:"Forms_textArea__ewb1I"}},25:function(e,t,a){e.exports={greyText:"LastLogs_greyText__3uRbl",logSection:"LastLogs_logSection__FIfj2",logContainer:"LastLogs_logContainer__1bYzr",logItem:"LastLogs_logItem__3LYN2",logContent:"LastLogs_logContent__1V2j2",ratingBox:"LastLogs_ratingBox__1bQvK",dark:"LastLogs_dark__2wsCJ",rightSection:"LastLogs_rightSection__1vweq",date:"LastLogs_date__26fGj",text:"LastLogs_text__CI0KV",link:"LastLogs_link__3gddT"}},33:function(e,t,a){e.exports={header:"Header_header__xgcOe",top:"Header_top__22E2D",nightMode:"Header_nightMode__2q1ab",logo:"Header_logo__-Ur4H",bars:"Header_bars__2zJIv",rotateButton:"Header_rotateButton__3niTt",nightmode_button:"Header_nightmode_button__eOSke",nightmode_button_caption:"Header_nightmode_button_caption__RbUCI"}},38:function(e,t,a){e.exports={loadingScreen:"loading_loadingScreen__2H5CQ",barContainer:"loading_barContainer__3KUv_",dark:"loading_dark__2vBuN",bar:"loading_bar__hYWH3",wave:"loading_wave__3RV-M",delay1:"loading_delay1__1nQMi",delay2:"loading_delay2__2OaWp"}},49:function(e,t,a){e.exports={logbutton:"AddNewLog_logbutton__pr-L-",available:"AddNewLog_available__kJNiw",dark:"AddNewLog_dark__3ZjsQ",unavailable:"AddNewLog_unavailable__MA3I3",floating:"AddNewLog_floating__2Nl1q",attentionBorder:"AddNewLog_attentionBorder__3a8Iv","at-border":"AddNewLog_at-border__tFaan"}},50:function(e,t,a){e.exports={loadingScreen:"loadingNetItem_loadingScreen__1O47w",barContainer:"loadingNetItem_barContainer__1t53H",bar:"loadingNetItem_bar__3HH3_",wave:"loadingNetItem_wave__3hIM8",delay1:"loadingNetItem_delay1___f5Fq",delay2:"loadingNetItem_delay2__3BH1w"}},51:function(e,t,a){e.exports={item:"logItem_item__dA_3S",rating_box:"logItem_rating_box__3C_wl",icon:"logItem_icon__3UL4I",top_line:"logItem_top_line__3ic4G",date:"logItem_date__3-u95",text:"logItem_text__3yHM-"}},52:function(e,t,a){e.exports={graph_container:"GraphCanvas_graph_container__2MZZk",graph_canvas:"GraphCanvas_graph_canvas__HmGWV",graph_stroke:"GraphCanvas_graph_stroke__2mMSd",dark:"GraphCanvas_dark__2N9vl",y_axis_number:"GraphCanvas_y_axis_number__154_Y"}},55:function(e,t,a){e.exports={wrapper:"Home_wrapper__149Kz",bigLogo:"Home_bigLogo__1wveO",dark:"Home_dark__2Znm1",text:"Home_text__69ODr",buttonWrapper:"Home_buttonWrapper__2RQ68"}},56:function(e,t,a){e.exports={container:"stats_container__1eRTS",first_block:"stats_first_block__3tW0d",average_block:"stats_average_block__iXNj_",average_box:"stats_average_box__2Z4AW",small_text_box:"stats_small_text_box__12Edz"}},69:function(e,t,a){e.exports={miniHeader:"Settings_miniHeader__1_TXA"}},76:function(e,t,a){e.exports={topSection:"AddLogPage_topSection__QZgN0",moodBox:"AddLogPage_moodBox__1xeOc",inputLine:"AddLogPage_inputLine__3tgcn",thumb:"AddLogPage_thumb__2rw4Y"}},78:function(e,t,a){e.exports={button:"Button_button__32eAG",btnPrimary:"Button_btnPrimary__2S9bO",btnWhite:"Button_btnWhite__3dBr3",btnDark:"Button_btnDark__2Y0W2"}},79:function(e,t,a){e.exports={container:"BackButton_container__1KWGq",button:"BackButton_button__VS2V4",text:"BackButton_text__3qAbX",dark:"BackButton_dark__3C9RV"}},80:function(e,t,a){e.exports={statusContainer:"MoodStatus_statusContainer__24nWH",statusBox:"MoodStatus_statusBox__9jz1B",dark:"MoodStatus_dark__2DJLr",statusText:"MoodStatus_statusText__1Z_1a"}},81:function(e,t,a){e.exports={navBar:"NavBar_navBar__6ZBq5",appearTop:"NavBar_appearTop__3avwr",navItem:"NavBar_navItem__1sD7x",nightmode:"NavBar_nightmode__2fDfW",navBarMask:"NavBar_navBarMask__1MRGk",fadeIn:"NavBar_fadeIn__3BAZm"}},97:function(e,t,a){e.exports={settingsIconWrapper:"SettingsItem_settingsIconWrapper__2EQ-K",settingsIcon:"SettingsItem_settingsIcon__2Sqsw",dark:"SettingsItem_dark__3uiar"}},98:function(e,t,a){e.exports={logoutIconWrapper:"LogoutItem_logoutIconWrapper__3mIlH",logoutIcon:"LogoutItem_logoutIcon__k3u0h",dark:"LogoutItem_dark__JXDKI"}}},[[132,1,2]]]);
//# sourceMappingURL=main.5291a221.chunk.js.map