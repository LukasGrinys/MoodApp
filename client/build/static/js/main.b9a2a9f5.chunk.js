(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{1:function(e,t,a){e.exports={net:"dashboard_net__29v1D",net_header:"dashboard_net_header__mJxst",net_item:"dashboard_net_item__2s5Kr",net_itemHeader:"dashboard_net_itemHeader__3ff1G",grey_text:"dashboard_grey_text__nwxhS",flex_between:"dashboard_flex_between__1Orke",log_wrapper:"dashboard_log_wrapper__3YCBP",log_content:"dashboard_log_content__3ZGxc",rating_box:"dashboard_rating_box__2tT1T",right_box:"dashboard_right_box__1JyH-",log_date:"dashboard_log_date__ZPhUO",log_text:"dashboard_log_text__jdt1W",read_log:"dashboard_read_log__2dsnM",button_logs:"dashboard_button_logs__1OSmW",status_container:"dashboard_status_container__2oYiD",status_box:"dashboard_status_box__1EASj",status_text:"dashboard_status_text__2R8er",flex_container:"dashboard_flex_container__2Ycr8",settings_icon_wrapper:"dashboard_settings_icon_wrapper__3ncII",settings_icon:"dashboard_settings_icon__32VOH",settings_container:"dashboard_settings_container__1NS0F",logout_icon_wrapper:"dashboard_logout_icon_wrapper__1PDMg"}},109:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(35),o=a.n(s),l=a(12),c=a(8),i=a(28),d=a(59),u=a.n(d),m=a(60),p=a(14),g=Object(i.c)({logs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CAN_LOG":case"CANNOT_LOG":return Object(p.a)({},e,{data:t.payload});case"GET_LAST_LOGS":return Object(p.a)({},e,{lastLogs:t.lastLogs});case"GET_MOOD_STATUS":return Object(p.a)({},e,{lastNineLogs:t.payload});case"GET_LOG":case"CLEAR_LOG":return Object(p.a)({},e,{logInfo:t.payload});case"GET_LOGS":return Object(p.a)({},e,{list:t.payload});case"POST_LOG":case"CLEAR_POST_LOG":return Object(p.a)({},e,{logPosted:t.payload});case"CLEAR_LOGS":return{lastLogs:t.payload,data:t.payload};case"CLEAR_LAST_LOGS":return Object(p.a)({},e,{lastLogs:t.lastLogs});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_USER":return Object(p.a)({},e,{success:t.payload.success,error:t.payload.error});case"LOGIN_USER":return Object(p.a)({},e,{data:t.payload.data});case"USER_AUTH":case"CLEAN_USER":return Object(p.a)({},e,{data:t.payload});default:return e}}}),h=a(23),_=a(3),f=a(4),b=a(6),E=a(5),v=a(7),y=a(37),N=a(17),w=a.n(N),x=a(11),O=a.n(x);function k(e){return!0===e?{color:"#f2f2f2"}:null}function S(e){return!0===e?{border:"1px solid #f2f2f2",backgroundColor:"#f2f2f2"}:null}function j(e){if(!0===e)return{background:"#cccccc",color:"#0d0d0d"}}function L(e){if(!0===e)return{background:"#cccccc",color:"#0d0d0d"}}function C(e){if(!0===e)return{stroke:"#d2d2d2"}}var A=r.a.createContext(),D=r.a.createContext();function F(){return Object(n.useContext)(A)}function M(e){var t=e.children,a=Object(n.useState)(function(){var e=localStorage.getItem("nightmode");return void 0!==e&&"true"===e}()),s=Object(y.a)(a,2),o=s[0],l=s[1];Object(n.useEffect)((function(){!0===o?(document.body.style.background="rgb(51, 51, 51)",document.body.style.color="rgb(242,242,242"):(document.body.style.background="#FFFFFF",document.body.style.color="#000000")}),[o]);return r.a.createElement(A.Provider,{value:o},r.a.createElement(D.Provider,{value:function(){l((function(e){return localStorage.setItem("nightmode",!e),!e}))}},t))}var I=function(e){var t=F(),a=[{iconName:"home",path:"/",text:"Home",isAuth:null},{iconName:"sign-in",path:"/login",text:"Log In",isAuth:!1},{iconName:"sign-out",path:"/logout",text:"Log Out",isAuth:!0},{iconName:"user-plus",path:"/register",text:"Sign Up",isAuth:null},{iconName:"book",path:"/dashboard",text:"Your Dashboard",isAuth:!0},{iconName:"cog",path:"/settings",text:"Settings",isAuth:!0}],n=function(a,n){return r.a.createElement(l.b,{to:a.path,key:n},r.a.createElement("div",{className:w.a.navItem,onClick:e.toggleNav,style:(s=t,!0===s?{backgroundColor:"#404040",color:"#ffffff"}:null)},r.a.createElement(O.a,{name:a.iconName})," ",a.text));var s};return r.a.createElement("div",null,a.map((function(t,a){return!0===e.isAuth&&!0===t.isAuth?n(t,a):!0!==e.isAuth&&!1===t.isAuth?n(t,a):null===t.isAuth?n(t,a):null})))},P=function(e){return r.a.createElement("div",{className:w.a.navBarDark,onClick:e.closeNav})},T=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:w.a.navBar},r.a.createElement(I,{toggleNav:e.toggleNav,isAuth:e.isAuth})),r.a.createElement(P,{closeNav:e.closeNav}))},U=a(62),R=a(47);var W=Object(c.b)((function(e){return{user:e.user}}))((function(e){var t=Object(n.useState)(!1),a=Object(y.a)(t,2),s=a[0],o=a[1],l=F(),c=function(){o(!s)},i=Object(n.useContext)(D);return r.a.createElement("div",{className:w.a.header},r.a.createElement("div",{className:w.a.top,style:!0===l?{backgroundColor:"#2F2F2F"}:null},r.a.createElement("div",{className:w.a.logo},"Moodapp"),r.a.createElement("div",{className:w.a.bars,style:e.user.data?{opacity:"1"}:{opacity:"0"}},s?r.a.createElement(O.a,{name:"close",onClick:c,style:{fontSize:"1.5em",padding:"2px",color:"#f2f2f2",transform:"rotate(90deg)",transition:"0.5s"}}):r.a.createElement(O.a,{name:"bars",onClick:c,style:{fontSize:"1.5em",padding:"2px",color:"#f2f2f2",transform:"rotate(180deg)",transition:"0.5s"}})),r.a.createElement("div",{className:w.a.nightmode_button,onClick:i},r.a.createElement(U.a,{icon:!0===l?R.b:R.a,style:{fontSize:"1.5rem"}}),r.a.createElement("div",{className:w.a.nightmode_button_caption}," ",!0===l?"Day mode":"Night mode"))),s?r.a.createElement(T,{toggleNav:c,isAuth:e.user.data.isAuth}):null)})),G=function(e){function t(){return Object(_.a)(this,t),Object(b.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement(M,null,r.a.createElement(W,null),r.a.createElement("div",{className:"content_wrapper"},this.props.children))}}]),t}(n.Component),B=a(38),Y=a.n(B),H=(a(92),a(29)),K=a.n(H),J=a(64),V=a.n(J),X=function(e){var t=F();return r.a.createElement("div",{style:function(t,a){var n={};return t?(n.color="#0d0d0d",n.background="#d2d2d2"):(n.color=e.color,n.background=e.background),a&&(n.background="#cccccc",n.color="#808080",n.cursor="not-allowed"),n}(t,e.disabled),className:V.a.button},e.children)},z=a(24),Z=a.n(z),q=function(){var e,t=F();return r.a.createElement("div",{className:Z.a.loadingScreen},r.a.createElement("div",{style:(e=t,!0===e?{color:"#f2f2f2"}:null)},"Loading"),r.a.createElement("br",null),r.a.createElement("div",{className:Z.a.barContainer},r.a.createElement("div",{className:Z.a.bar,style:S(t)}),r.a.createElement("div",{className:[Z.a.bar,Z.a.delay1].join(" "),style:S(t)}),r.a.createElement("div",{className:[Z.a.bar,Z.a.delay2].join(" "),style:S(t)})))};var Q=Object(c.b)((function(e){return{user:e.user}}))((function(e){var t=e.user,a=(e.nightmode,F());return t.data?r.a.createElement("div",{className:K.a.wrapper},r.a.createElement(Y.a,{animateIn:"fadeInDown",animateOnce:!0},r.a.createElement("div",{className:K.a.bigLogo,style:k(a)},"MoodApp")),r.a.createElement(Y.a,{animateIn:"fadeInDown",delay:1e3,offset:75,animateOnce:!0},t.data.isAuth?r.a.createElement("div",{className:K.a.textAlt},"Hello ",r.a.createElement("span",{style:{color:"#3366ff"}}," ",t.data.firstName," ")):r.a.createElement("div",{className:K.a.textAlt},"Your daily mood tracker")),r.a.createElement(Y.a,{animateIn:"fadeInDown",delay:2e3,offset:75,animateOnce:!0},function(e){return e?r.a.createElement("div",{className:K.a.buttons},r.a.createElement(l.b,{to:"/dashboard"},r.a.createElement(X,{nightmode:a,color:"#fffff2",background:"#3366ff"},"Dashboard")),r.a.createElement(l.b,{to:"/logout"},r.a.createElement(X,{nightmode:a,color:"#3366ff",background:"#fff2f2"},"Log Out"))):r.a.createElement("div",{className:K.a.buttons},r.a.createElement(l.b,{to:"/login"},r.a.createElement(X,{nightmode:a,color:"#fffff2",background:"#3366ff"},"Log In")),r.a.createElement(l.b,{to:"/register"},r.a.createElement(X,{nightmode:a,color:"#3366ff",background:"#fff2f2"},"Register")))}(t.data.isAuth))):r.a.createElement(q,{nightmode:a})})),$=a(65),ee=a.n($),te=function(e){return r.a.createElement("div",{className:ee.a.formWrapper},e.children)},ae=a(41),ne=a(13),re=a.n(ne);function se(e,t,a){var n={userId:a,date:e,timing:t},r=re.a.post("/api/canLog",n);return function(e){r.then((function(t){var a={canLog:t.data.canLog};e({type:"CAN_LOG",payload:a})}))}}function oe(e,t,a,n){return{type:"GET_LOGS",payload:re.a.get("/api/getLogs?id=".concat(e,"&skip=").concat(t,"&limit=").concat(a)).then((function(e){return"No logs found"===e.data?[].concat(Object(ae.a)(n),[e.data]):n?[].concat(Object(ae.a)(n),Object(ae.a)(e.data)):e.data}))}}var le=a(39),ce=a.n(le),ie=function(e){return!0===F()?r.a.createElement("div",{className:ce.a.messageBox,style:{color:"#f2f2f2"}},e.text):e.success?r.a.createElement("div",{className:ce.a.messageBox,style:{color:"green"}},e.text):r.a.createElement("div",{className:ce.a.messageBox,style:{color:"red"}},e.text)},de=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(s)))).state={email:"",password:"",success:!1,message:"",isDisabled:!1},a.handleEmail=function(e){a.setState({email:e.target.value,message:""})},a.handlePassword=function(e){a.setState({password:e.target.value,message:""})},a.handleForm=function(){if(!a.state.isDisabled){if(""===a.state.email)return void a.showErrorMessage("Empty e-mail field!");if(""===a.state.password)return void a.showErrorMessage("Please enter your password");var e={email:a.state.email,password:a.state.password};a.props.dispatch(function(e){var t=re.a.post("/api/login",e);return function(e){t.then((function(t){var a=t.data;e({type:"LOGIN_USER",payload:{data:a}})}))}}(e)),a.setState({isDisabled:!0})}},a.showErrorMessage=function(e){a.setState({message:e})},a.renderMessage=function(){return a.state.success?r.a.createElement(ie,{nightmode:a.props.nightmode,text:a.state.message,success:!0}):a.state.success?null:r.a.createElement(ie,{nightmode:a.props.nightmode,text:a.state.message,success:!1})},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.user.data.isAuth?this.setState({message:"Logged in successfully!",success:!0}):this.setState({message:e.user.data.message,success:!1,isDisabled:!1})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Log In"),r.a.createElement("form",null,r.a.createElement("span",null,"Enter your email: "),r.a.createElement("br",null),r.a.createElement("input",{type:"email",name:"email",value:this.state.email,onChange:this.handleEmail}),r.a.createElement("br",null),r.a.createElement("span",null,"Enter your password:"),r.a.createElement("br",null),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handlePassword}),r.a.createElement("br",null),r.a.createElement("br",null),this.renderMessage(),r.a.createElement("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement("div",{onClick:this.handleForm},r.a.createElement(X,{color:"#fffff2",background:"#3366ff",disabled:this.state.isDisabled,nightmode:this.props.nightmode},"Log In")))))}}]),t}(n.Component);var ue=Object(c.b)((function(e){return{user:e.user}}))(de),me=function(){var e=F();return r.a.createElement(te,null,r.a.createElement(ue,{nightmode:e}))},pe=a(66),ge=a.n(pe),he=a(34),_e=a.n(he),fe=function(e){var t=F();return r.a.createElement("div",{className:_e.a.top_panel},r.a.createElement("div",{className:_e.a.back_button,onClick:function(){window.history.back()}},r.a.createElement(O.a,{name:"arrow-left",className:_e.a.back,style:k(t)}),r.a.createElement("div",{className:_e.a.button_text,style:k(t)},"Go back")))},be=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(s)))).state={fname:"",lname:"",email:"",password:"",message:null,success:null,isDisabled:!1},a.handleFName=function(e){a.setState({fname:e.target.value,message:""})},a.handleLName=function(e){a.setState({lname:e.target.value,message:""})},a.handleEmail=function(e){a.setState({email:e.target.value,message:""})},a.handlePassword=function(e){a.setState({password:e.target.value,message:""})},a.handleForm=function(){if(!a.state.isDisabled){var e=a.state.fname.trim().length>0?a.state.fname.trim():null,t=a.state.lname.trim().length>0?a.state.lname.trim():null,n=a.state.email.trim().length>0?a.state.email.trim():null,r=a.state.password.trim().length>=6?a.state.password.trim():null,s={email:n,password:r,firstName:e,lastName:t};e&&t&&n&&r?(a.setState({isDisabled:!0}),a.props.dispatch(function(e){var t=re.a.post("/api/users",e);return function(e){t.then((function(t){var a=t.data,n={success:a.success,error:a.error};e({type:"CREATE_USER",payload:n})}))}}(s))):a.state.password.trim().length<6?a.setState({success:!1,message:"The password needs to be at least 6 characters long",isDisabled:!1}):a.setState({success:!1,message:"Fill out the missing fields",isDisabled:!1})}},a.renderMessage=function(){return a.state.message&&a.state.success?r.a.createElement(ie,{text:a.state.message,success:a.state.success}):a.state.message&&!a.state.success?r.a.createElement(ie,{text:a.state.message,success:a.state.success}):null},a.renderLoginButton=function(){return!0===a.state.success?r.a.createElement(l.b,{to:"/login"},r.a.createElement(X,{color:"#fffff2",background:"#3366ff"},"Log in")):null},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.user.success?this.setState({fname:"",lname:"",email:"",password:"",success:!0,message:"Your account has been succesfully created!"}):!1===e.user.success&&(11e3===e.user.error.code?this.setState({success:!1,message:"User with the e-mail listed already exists",isDisabled:!1}):this.setState({success:!1,message:"Error, try again later",isDisabled:!1}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Sign up"),r.a.createElement("div",null,"Signing up is easy and takes only a few minutes!"),r.a.createElement("br",null),r.a.createElement("form",null,r.a.createElement("span",null,"Enter your first name: "),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"fname",value:this.state.fname,onChange:this.handleFName}),r.a.createElement("br",null),r.a.createElement("span",null,"Enter your last name: "),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"lname",value:this.state.lname,onChange:this.handleLName}),r.a.createElement("br",null),r.a.createElement("span",null,"Enter your e-mail:"),r.a.createElement("br",null),r.a.createElement("input",{type:"email",name:"email",value:this.state.email,onChange:this.handleEmail}),r.a.createElement("br",null),r.a.createElement("span",null,"Enter your password:"),r.a.createElement("br",null),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handlePassword}),r.a.createElement("br",null),r.a.createElement("br",null),this.renderMessage(),r.a.createElement("div",{className:ge.a.center_line},r.a.createElement("div",{onClick:this.handleForm},r.a.createElement(X,{color:"#fffff2",disabled:this.state.isDisabled,background:"#3366ff"},"Sign Me Up!"),this.renderLoginButton())),r.a.createElement("br",null)),r.a.createElement(fe,null))}}]),t}(n.Component);var Ee=Object(c.b)((function(e){return{user:e.user}}))(be),ve=function(){return r.a.createElement("div",null,r.a.createElement(te,null,r.a.createElement(Ee,null)))},ye=a(1),Ne=a.n(ye),we=a(25),xe=a.n(we),Oe=function(){return r.a.createElement("div",{className:xe.a.loadingScreen},r.a.createElement("div",{className:xe.a.barContainer},r.a.createElement("div",{className:xe.a.bar}),r.a.createElement("div",{className:[xe.a.bar,xe.a.delay1].join(" ")}),r.a.createElement("div",{className:[xe.a.bar,xe.a.delay2].join(" ")})))},ke=function(e){var t,a=F();return e.lastLogs?"No logs found"===e.lastLogs?r.a.createElement("div",{className:Ne.a.grey_text},"There are no logs at the moment ",r.a.createElement("br",null),r.a.createElement("br",null),"Write Your first one, by pressing the green button at the top"):r.a.createElement("div",{className:Ne.a.flex_between},r.a.createElement("div",{className:Ne.a.net_itemHeader},"Last logs"),0===(t=e.lastLogs).length||typeof t===String?null:t.slice(0,3).map((function(e,t){return r.a.createElement("div",{key:t,className:Ne.a.log_wrapper},r.a.createElement("div",{className:Ne.a.log_content},r.a.createElement("div",{className:Ne.a.rating_box},e.rating),r.a.createElement("div",{className:Ne.a.right_box},r.a.createElement("div",{className:Ne.a.log_date},e.date),r.a.createElement("div",{className:Ne.a.log_text},e.text))),r.a.createElement("div",{className:Ne.a.read_log},r.a.createElement(l.b,{to:"/logs/".concat(e._id),style:k(a)},"Read more")))})),r.a.createElement(l.b,{to:"/logs"},r.a.createElement("div",{className:Ne.a.button_logs,style:j(a)},"All Logs"))):r.a.createElement(Oe,null)},Se=function(e){var t=F(),a=function(e){if("No logs found"!==e){var t=0,a=0;e.map((function(e){return t+=parseInt(e.rating),a++,null}));var n=Math.round(t/a*10)/10;return Number.isInteger(n)?"".concat(n,".0"):n}return"N/A"};return e.lastLogs?r.a.createElement("div",{className:Ne.a.status_container},r.a.createElement("div",{className:Ne.a.net_itemHeader},"Latest mood status"),r.a.createElement("div",{className:Ne.a.status_box,style:j(t)},a(e.lastLogs)),r.a.createElement("div",{className:Ne.a.status_text},function(t){var a=parseInt(t);return e.lastLogs.length<9?"":a>=7.5?"Great":a<7.5&&a>=5?"Good":a<5&&a>=3?"Average":a<3?"Bad":void 0}(a(e.lastLogs))),r.a.createElement(l.b,{to:"/stats",style:{width:"100%"}},r.a.createElement("div",{className:Ne.a.button_logs,style:j(t)},"Stats"))):r.a.createElement(Oe,null)},je=function(e){var t=F();return r.a.createElement("div",null,r.a.createElement("div",{className:Ne.a.net_header},"Settings"),r.a.createElement("div",{className:Ne.a.flex_container},r.a.createElement(l.b,{to:"/settings",className:Ne.a.flex_container},r.a.createElement("div",{className:Ne.a.settings_icon_wrapper},r.a.createElement(O.a,{name:"cog",className:Ne.a.settings_icon,style:k(t)})))))},Le=function(e){var t=F();return r.a.createElement("div",null,r.a.createElement("div",{className:Ne.a.net_header},"Log out"),r.a.createElement("div",{className:Ne.a.flex_container},r.a.createElement(l.b,{to:"/logout",className:Ne.a.flex_container},r.a.createElement("div",{className:Ne.a.logout_icon_wrapper},r.a.createElement(O.a,{name:"sign-out",className:Ne.a.settings_icon,style:k(t)})))))},Ce=function(e){function t(){return Object(_.a)(this,t),Object(b.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.dispatch(function(e){var t="/api/getLogs?id=".concat(e,"&limit=9"),a=re.a.get(t);return function(e){a.then((function(t){e({type:"GET_LAST_LOGS",lastLogs:t.data})}))}}(this.props.user))}},{key:"render",value:function(){return r.a.createElement("div",{className:Ne.a.net},r.a.createElement("div",{className:Ne.a.net_header},"Your dashboard"),r.a.createElement("div",{className:Ne.a.net_item},r.a.createElement(ke,{lastLogs:this.props.lastLogs})),r.a.createElement("div",{className:Ne.a.net_item},r.a.createElement(Se,{lastLogs:this.props.lastLogs})),r.a.createElement("div",{className:Ne.a.net_item},r.a.createElement(je,null)),r.a.createElement("div",{className:Ne.a.net_item},r.a.createElement(Le,null)))}}]),t}(n.Component);var Ae=Object(c.b)((function(e){return{lastLogs:e.logs.lastLogs}}))(Ce),De=a(30),Fe=a.n(De),Me=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(s)))).state={timeRemaining:0},a.returnDate=function(){var e=new Date,t=e.getMonth()<10?"0".concat(e.getMonth()+1):"".concat(e.getMonth()+1),a=e.getDate()<10?"0".concat(e.getDate()):e.getDate();return[e.getFullYear(),t,a].join("-")},a.returnDaytime=function(){var e=(new Date).getHours(),t="";return e>=7&&e<=12&&(t="Morning"),e>12&&e<=19&&(t="Afternoon"),e>19&&e<=23&&(t="Evening"),e<7&&(t="Night"),t},a.renderButton=function(e){return e&&"night"!==a.returnDaytime()?r.a.createElement(l.b,{to:"/addlog"},r.a.createElement("div",{className:[Fe.a.logbutton,Fe.a.available].join(" "),style:(t=a.props.nightmode,!0===t?{backgroundColor:"#404040"}:null)},r.a.createElement("div",{className:Fe.a.attentionBorder}),r.a.createElement(O.a,{name:"fas fa-plus",className:Fe.a.floating})," ADD LOG")):r.a.createElement("div",{className:[Fe.a.logbutton,Fe.a.unavailable].join(" ")},"Next log will be available at: ",a.returnTimeRemaining());var t},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.returnDate(),t=this.returnDaytime();this.props.dispatch(se(e,t,this.props.userId))}},{key:"returnTimeRemaining",value:function(){var e=0;switch(this.returnDaytime()){case"Morning":e=13;break;case"Afternoon":e=20;break;case"Evening":e=7;break;default:e=7}return"".concat(e,":00")}},{key:"render",value:function(){return this.props.canLog?r.a.createElement("div",null,this.renderButton(this.props.canLog.canLog)):r.a.createElement("div",null,r.a.createElement(Oe,null))}}]),t}(n.Component);var Ie=Object(c.b)((function(e){return{canLog:e.logs.data}}))(Me),Pe=function(e){var t=F();return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(Ie,{userId:e.userId,nightmode:t})),r.a.createElement(Ae,{user:e.userId,nightmode:t}))},Te=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={userLogged:!1},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.user.data.isAuth&&this.setState({userLogged:!0,userId:e.user.data.id})}},{key:"render",value:function(){return this.state.userLogged?r.a.createElement(Pe,{userId:this.state.userId}):r.a.createElement(q,null)}}]),t}(n.Component);var Ue=Object(c.b)((function(e){return{user:e.user}}))(Te),Re=a(31),We=a.n(Re),Ge=a(67),Be=a.n(Ge),Ye=function(e){var t=e.children,a=F();return r.a.createElement("div",{className:Be.a.moodbox,style:L(a)},t)},He=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(s)))).state={dataReceived:!1,mood:0,text:"",moodText:"",error:!1,errorMessage:"",logPosted:!1,disabled:!1},a.returnDate=function(){var e=new Date,t=e.getMonth()<10?"0".concat(e.getMonth()+1):"".concat(e.getMonth()+1),a=e.getDate()<10?"0".concat(e.getDate()):e.getDate();return[e.getFullYear(),t,a].join("-")},a.returnDaytime=function(){var e=(new Date).getHours(),t="";return e>=7&&e<=12&&(t="Morning"),e>12&&e<=19&&(t="Afternoon"),e>19&&e<=23&&(t="Evening"),e<7&&(t="Night"),t},a.handleMoodText=function(e){var t="";e>=9?t="Awesome!":e>=7?t="Good":e>=5?t="Average":e>=3?t="Not well":e<3&&(t="Bad"),a.setState({moodText:t})},a.handleMoodInput=function(e){var t=e.target.value;a.setState({mood:t,error:!1,errorMessage:""}),a.handleMoodText(t)},a.handleTextInput=function(e){var t=e.target.value;a.setState({text:t})},a.handleFormData=function(){if(0===a.state.mood)a.setState({error:!0,errorMessage:"You must rate your mood"});else{var e=a.returnDaytime();"Night"===e?a.setState({error:!0,errorMessage:"Can't post new logs right now. Next log will be available on 7:00"}):a.state.logPosted||a.state.disabled||(a.setState({disabled:!0}),a.props.dispatch(function(e,t,a,n,r){var s={ownerId:e,date:t,timing:a,rating:n,text:r};return{type:"POST_LOG",payload:re.a.post("/api/postLog",s).then((function(e){return e.data}))}}(a.props.user.data.id,a.returnDate(),e,a.state.mood,a.state.text)))}},a.handleKeyUp=function(e){13===e.keyCode&&(e.preventDefault(),a.handleFormData())},a.renderErrorMessage=function(){return a.state.error?r.a.createElement("span",{style:{color:"#800000"}},a.state.errorMessage):a.state.logPosted?r.a.createElement("span",{style:{color:"#16774f"}},a.state.errorMessage):null},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(e.user.data.id&&!this.state.dataReceived){var a=this.returnDaytime(),n=this.returnDate();this.props.dispatch(se(n,a,e.user.data.id)),this.setState({dataReceived:!0})}e.user.data&&!e.logs.data&&this.props.history.push("/dashboard"),e.logs.logPosted&&(e.logs.logPosted.success?(this.setState({error:!1,errorMessage:"Log was successfully posted. You will be redirected soon..",logPosted:!0}),setTimeout((function(){t.props.dispatch({type:"CANNOT_LOG",payload:{}}),t.props.history.push("/dashboard")}),3e3)):this.setState({error:!0,errorMessage:"Something went wrong, try again later",disabled:!1,logPosted:!1}))}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"CLEAR_POST_LOG",payload:{}}),this.props.dispatch({type:"CLEAR_LAST_LOGS",lastLogs:null})}},{key:"render",value:function(){return this.props.logs.data&&this.props.user&&!0===this.props.logs.data.canLog?r.a.createElement(te,null,r.a.createElement("h1",null,"Add a Log"),r.a.createElement("label",{htmlFor:"mood"},"How do you feel at the moment? Rate your mood:"),r.a.createElement("br",null),r.a.createElement("div",{className:We.a.center},r.a.createElement(Ye,null,this.state.mood),r.a.createElement("br",null),r.a.createElement("div",{className:We.a.inputLine},r.a.createElement(O.a,{className:We.a.thumb,name:"thumbs-down",style:{color:"#800000"}}),r.a.createElement("input",{onChange:this.handleMoodInput,type:"range",id:"mood",name:"mood",min:"1",max:"10",value:this.state.mood}),r.a.createElement(O.a,{className:We.a.thumb,name:"thumbs-up",style:{color:"#16774f"}})),r.a.createElement("br",null),r.a.createElement("div",null,this.state.moodText)),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"logtext"},"Describe your thoughts: (optional)"),r.a.createElement("br",null),r.a.createElement("textarea",{id:"logtext",name:"logtext",onKeyUp:this.handleKeyUp,onChange:this.handleTextInput,value:this.state.text,placeholder:"What made your day better? Was there any specific situations or thoughts that changed your mood? If you don't want to write anything, leave this field empty."}),r.a.createElement("br",null),r.a.createElement("div",{className:We.a.inputLine},this.renderErrorMessage()),r.a.createElement("div",{className:We.a.inputLine},r.a.createElement("div",{onClick:this.handleFormData},r.a.createElement(X,{color:"#FFFFFF",background:"#3366FF",disabled:this.state.disabled,nightmode:this.props.nightmode},"Submit"))),r.a.createElement(fe,{nightmode:this.props.nightmode})):r.a.createElement(q,{nightmode:this.props.nightmode})}}]),t}(n.Component);var Ke=Object(c.b)((function(e){return{logs:e.logs}}))(He),Je=a(26),Ve=a.n(Je),Xe=function(e){var t=e.date,a=e.timing,n=e.text,s=e.rating;return r.a.createElement("div",{className:Ve.a.item},r.a.createElement("div",{className:Ve.a.top_line},r.a.createElement("div",{className:Ve.a.rating_box},s),r.a.createElement("div",null,r.a.createElement(O.a,{name:"hourglass",className:Ve.a.icon}),a),r.a.createElement("div",{className:Ve.a.date},r.a.createElement(O.a,{name:"calendar",className:Ve.a.icon}),t)),r.a.createElement("div",{className:Ve.a.text},n))},ze=a(40),Ze=a.n(ze),qe=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(s)))).state={skip:3},a.loadMoreLogs=function(){if(a.props.user.data){var e=a.state.skip;a.props.dispatch(oe(a.props.user.data.id,e,3,a.props.logs.list)),e+=3,a.setState({skip:e})}},a.returnLogs=function(e){return e?e.map((function(e,t){return"No logs found"!==e?r.a.createElement(Xe,{key:t,rating:e.rating,date:e.date,timing:e.timing,text:e.text}):null})):r.a.createElement(Oe,null)},a.returnLoadMoreButton=function(e){return e&&e.length>0&&"No logs found"!==e[e.length-1]?r.a.createElement(X,{background:"#3366FF",color:"#FFFFFF"},"Load more"):null},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.dispatch(oe(this.props.user.data.id,0,3))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(fe,null),r.a.createElement("div",{className:Ze.a.header},"All logs"),r.a.createElement("div",{className:Ze.a.logs_wrapper},this.returnLogs(this.props.logs.list)),r.a.createElement("div",{className:Ze.a.bottom_panel},r.a.createElement("div",{onClick:this.loadMoreLogs},this.returnLoadMoreButton(this.props.logs.list))))}}]),t}(n.Component),Qe=function(e){function t(){return Object(_.a)(this,t),Object(b.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return this.props.user.data?r.a.createElement(qe,this.props):r.a.createElement(q,null)}}]),t}(n.Component);var $e=Object(c.b)((function(e){return{logs:e.logs,user:e.user}}))(Qe),et=a(21),tt=a.n(et),at=function(e){function t(){return Object(_.a)(this,t),Object(b.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.dispatch(function(e){var t=re.a.get("/api/getLog?id=".concat(e));return function(e){t.then((function(t){var a=t.data;e({type:"GET_LOG",payload:a})}))}}(this.props.match.params.id))}},{key:"UNSAFE_componentWillUnmount",value:function(){this.props.dispatch({type:"CLEAR_LOG",payload:{}})}},{key:"render",value:function(){if(this.props.logs){if(this.props.logs.logInfo){var e=this.props.logs.logInfo.log;return e?r.a.createElement("div",null,r.a.createElement("div",{className:tt.a.top_panel},r.a.createElement(fe,{nightmode:this.props.nightmode})),r.a.createElement("div",{className:tt.a.logWrapper},r.a.createElement("div",{className:tt.a.top_line},r.a.createElement("div",{className:tt.a.rating_box},e.rating),r.a.createElement("div",null,r.a.createElement(O.a,{name:"hourglass",className:tt.a.icon}),e.timing),r.a.createElement("div",{className:tt.a.date},r.a.createElement(O.a,{name:"calendar",className:tt.a.icon}),e.date)),r.a.createElement("div",{className:tt.a.text},e.text))):r.a.createElement(q,{nightmode:this.props.nightmode})}return r.a.createElement(q,{nightmode:this.props.nightmode})}return r.a.createElement(q,null)}}]),t}(n.Component);var nt=Object(c.b)((function(e){return{logs:e.logs}}))(at),rt=function(e){function t(){return Object(_.a)(this,t),Object(b.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.dispatch(function(){var e=re.a.get("/api/logout");return function(t){e.then((function(e){200===e.status&&t({type:"CLEAN_USER",payload:{}})}))}}())}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"CLEAR_LOGS",payload:null})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(q,{nightmode:this.props.nightmode}))}}]),t}(n.Component);var st=Object(c.b)((function(e){return{user:e.user,logs:e.logs}}))(rt),ot=a(32),lt=a.n(ot),ct=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(s)))).state={dataReceived:!1,firstName:"",lastName:"",currentPassword:"",newPassword:"",dataSuccess:null,dataSuccessMessage:"",passwordChanged:null,passwordChangedMessage:"",isDisabled:!1},a.handleFirstName=function(e){var t=e.target.value;a.setState({firstName:t,dataSuccess:null})},a.handleLastName=function(e){var t=e.target.value;a.setState({lastName:t,dataSuccess:null})},a.handleCurrentPassword=function(e){var t=e.target.value;a.setState({currentPassword:t,passwordChanged:null})},a.handleNewPassword=function(e){var t=e.target.value;a.setState({newPassword:t,passwordChanged:null})},a.saveChanges=function(){if(!a.state.isDisabled){a.setState({isDisabled:!0});var e={_id:a.props.user.data.id,firstName:a.state.firstName,lastName:a.state.lastName};re.a.post("/api/editAccount/",e).then((function(e){e.data.success?a.setState({dataSuccess:!0,dataSuccessMessage:"Data changed successfully",isDisabled:!1}):a.setState({dataSuccess:!1,dataSuccessMessage:"Something went wrong, try again later",isDisabled:!1})})).catch((function(e){a.setState({dataSuccess:!1,dataSuccessMessage:e.data})}))}},a.renderDataChangedMessage=function(){return null!==a.state.dataSuccess?r.a.createElement(ie,{success:a.state.dataSuccess,text:a.state.dataSuccessMessage,nightmode:a.props.nightmode}):null},a.renderPasswordChangedMessage=function(){return null!==a.state.passwordChanged?r.a.createElement(ie,{success:a.state.passwordChanged,text:a.state.passwordChangedMessage,nightmode:a.props.nightmode}):null},a.saveNewPassword=function(){if(!a.state.isDisabled){var e=a.state.currentPassword,t=a.state.newPassword,n={_id:a.props.user.data.id,oldpassword:e,newpassword:t};t.trim().length<6?a.setState({passwordChanged:!1,passwordChangedMessage:"The password is too short. You must pick a password longer than 6 characters"}):(a.setState({isDisabled:!0}),re.a.post("/api/changePassword",n).then((function(e){var t=e.data;!0===t.error&&a.setState({passwordChanged:!1,passwordChangedMessage:t.message,isDisabled:!1}),!1===t.error&&a.setState({passwordChanged:!0,passwordChangedMessage:t.message,currentPassword:"",newPassword:"",isDisabled:!1}),t||a.setState({passwordChanged:!1,passwordChangedMessage:"An error occured. Try again later",isDisabled:!1})})))}},a.redirectToDeleteAccount=function(){window.location="/delete"},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){"false"===this.props.nightmode?this.setState({nightmode:!1}):"true"===this.props.nightmode&&this.setState({nightmode:!0})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(e.user.data){var a=e.user.data.id;re.a.get("/api/getUser?id=".concat(a)).then((function(e){var a=e.data,n=a.doc.firstName,r=a.doc.lastName;t.setState({dataReceived:!0,firstName:n,lastName:r})}))}}},{key:"render",value:function(){return this.props.user&&this.state.dataReceived?r.a.createElement("div",null,r.a.createElement(fe,{nightmode:this.props.nightmode}),r.a.createElement(te,null,r.a.createElement("h1",null,"Account settings"),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("b",null,"User: ")," ",this.props.user.data.email," "),r.a.createElement("br",null),r.a.createElement("h2",null,"Edit details:"),r.a.createElement("label",{htmlFor:"firstName"},"Your first name:"),r.a.createElement("input",{type:"text",name:"firstName",onChange:this.handleFirstName,value:this.state.firstName}),r.a.createElement("label",{htmlFor:"lastName"},"Your last name:"),r.a.createElement("input",{type:"text",name:"lastName",onChange:this.handleLastName,value:this.state.lastName}),this.renderDataChangedMessage(),r.a.createElement("div",{className:lt.a.center},r.a.createElement("div",{onClick:this.saveChanges},r.a.createElement(X,{background:"#3366FF",color:"#FFFFFF",disabled:this.state.isDisabled,nightmode:this.props.nightmode},"Save changes")))),r.a.createElement("br",null),r.a.createElement(te,null,r.a.createElement("h2",null,"Edit password:"),r.a.createElement("label",{htmlFor:"password1"},"Enter your current password:"),r.a.createElement("input",{type:"password",onChange:this.handleCurrentPassword}),r.a.createElement("label",{htmlFor:"password2"},"Enter your new password:"),r.a.createElement("input",{type:"password",onChange:this.handleNewPassword}),this.renderPasswordChangedMessage(),r.a.createElement("div",{className:lt.a.center},r.a.createElement("div",{onClick:this.saveNewPassword},r.a.createElement(X,{background:"#3366FF",color:"#FFFFFF",disabled:this.state.isDisabled,nightmode:this.props.nightmode},"Change password")))),r.a.createElement(te,null,r.a.createElement("h2",null,"Delete account:"),r.a.createElement("div",{className:lt.a.center},r.a.createElement("div",{onClick:this.redirectToDeleteAccount},r.a.createElement(X,{background:"#3366FF",color:"#FFFFFF",nightmode:this.props.nightmode},"Delete account"))))):r.a.createElement(q,{nightmode:this.props.nightmode})}}]),t}(n.Component),it=a(2),dt=a.n(it),ut=function(e){var t=e.points,a=F();return r.a.createElement("polyline",{points:t,className:dt.a.graph_stroke,style:C(a)})},mt=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(b.a)(this,Object(E.a)(t).call(this,e))).state={width:0},a.returnPolylinePoints=function(e){for(var t="",n=a.state.width,r=0;r<e.length;r++){var s=220-20*e[r];t+=Math.floor(n/21*(e.length-r-1))+","+s+" "}return t},a.myInput=r.a.createRef(),a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",(function(){var t=0;(t=e.myInput.current?e.myInput.current.offsetWidth:490)!==e.state.width&&e.setState({width:t})})),0===this.state.width&&null!==this.myInput&&this.setState({width:this.myInput.current.offsetWidth})}},{key:"render",value:function(){return r.a.createElement("div",{className:dt.a.graph_canvas,ref:this.myInput},r.a.createElement("div",{className:dt.a.y_axis_number},"10"),r.a.createElement("div",{className:dt.a.y_axis_number,style:{transform:"translate(10px, 100px)"}},"5"),r.a.createElement("div",{className:dt.a.y_axis_number,style:{transform:"translate(10px, 200px)"}},"0"),r.a.createElement("svg",{width:"100%",height:"100%"},r.a.createElement("polyline",{points:"1,20 490,20",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),r.a.createElement("polyline",{points:"1,40 490,40",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),r.a.createElement("polyline",{points:"1,60 490,60",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),r.a.createElement("polyline",{points:"1,80 490,80",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),r.a.createElement("polyline",{points:"1,100 490,100",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),r.a.createElement("polyline",{points:"1,120 490,120",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),r.a.createElement("polyline",{points:"1,140 490,140",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),r.a.createElement("polyline",{points:"1,160 490,160",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),r.a.createElement("polyline",{points:"1,180 490,180",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),r.a.createElement("polyline",{points:"1,200 490,200",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),r.a.createElement(ut,{points:this.returnPolylinePoints(this.props.list)})))}}]),t}(n.Component),pt=a(68),gt=a.n(pt),ht=a(69),_t=a.n(ht),ft=a(70),bt=a.n(ft),Et=function(e){var t=e.obj,a=(e.nightmode,F()),n=function(e){return"".concat(!0===e?dt.a.daytime_icon_nightmode:dt.a.daytime_icon)},s=function(e,t){return"N/A"!==e?r.a.createElement("div",{className:dt.a.daytime_bullet,style:{bottom:"".concat(30*e-10,"px"),left:"".concat(t)}},r.a.createElement("div",{className:dt.a.daytime_bullet_text},e)):null};return r.a.createElement("div",{className:dt.a.daytime_canvas},r.a.createElement("svg",{width:"100%",height:"100%",overflow:"hidden"},r.a.createElement("polyline",{points:"1,60 300,60",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),r.a.createElement("polyline",{points:"1,120 300,120",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),r.a.createElement("polyline",{points:"1,180 300,180",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),r.a.createElement("polyline",{points:"1,240 300,240",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}}),r.a.createElement("polyline",{points:"1,300 300,300",style:{fill:"none",stroke:"#cccccc",strokeWidth:"1"}})),s(t.morningAverage,null),s(t.afternoonAverage,"48%"),s(t.eveningAverage,"82%"),r.a.createElement("div",{className:dt.a.y_axis_number_daytime,style:{top:"-12px"}},"10"),r.a.createElement("div",{className:dt.a.y_axis_number_daytime,style:{top:"48px",left:"-15px"}},"8"),r.a.createElement("div",{className:dt.a.y_axis_number_daytime,style:{top:"108px",left:"-15px"}},"6"),r.a.createElement("div",{className:dt.a.y_axis_number_daytime,style:{top:"168px",left:"-15px"}},"4"),r.a.createElement("div",{className:dt.a.y_axis_number_daytime,style:{top:"228px",left:"-15px"}},"2"),r.a.createElement("div",{className:dt.a.daytime_bottom_line},r.a.createElement("div",{className:dt.a.daytime_time},"7:00"),r.a.createElement("div",{className:dt.a.daytime_time,style:{left:"33%"}},"13:00"),r.a.createElement("div",{className:dt.a.daytime_time,style:{left:"66%"}},"20:00"),r.a.createElement("div",{className:dt.a.daytime_time,style:{left:"100%"}},"00:00"),r.a.createElement("img",{src:gt.a,className:n(a),style:{left:"13%",padding:"2px"},alt:"none"}),r.a.createElement("img",{src:_t.a,className:n(a),style:{left:"48%"},alt:"none"}),r.a.createElement("img",{src:bt.a,className:n(a),style:{left:"82%"},alt:"none"})))};var vt=function(e){var t=e.children,a=F();return r.a.createElement("div",{className:dt.a.average_box,style:L(a)},t)},yt=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={dataReceived:!1},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t;e.user.data&&!1===this.state.dataReceived&&(this.props.dispatch((t=e.user.data.id,{type:"GET_LOGS",payload:re.a.get("/api/getLogs?id=".concat(t,"&limit=100")).then((function(e){return"No logs found"===e.data?[]:e.data}))})),this.setState({dataReceived:!0}))}},{key:"render",value:function(){if(this.props.user.data&&this.props.logs.list){if(this.props.logs.list.length>0){var e=function(e){for(var t=[],a=0,n=0,r=0;r<e.length;r++){var s=e[r].date;if(t.indexOf(s)<0?(t.push(e[r].date),a+=Number(e[r].rating),n++):t.indexOf(s)>=0&&(a+=Number(e[r].rating),n++),t.length>=7)break}return{average:Math.floor(10*a/n)/10,firstDay:t[t.length-1]?t[t.length-1]:"N/A",lastDay:t[0]?t[0]:"N/A"}}(this.props.logs.list),t=function(e){for(var t=[],a="",n="",r=0;r<e.length;r++)if(t.push(Number(e[r].rating)),0===r&&(n=e[r].date),r===e.length-1&&(a=e[r].date),20===r){a=e[r].date;break}return{arr:t,firstDay:a,lastDay:n}}(this.props.logs.list),a=function(e){for(var t=0,a=0,n=0,r=0,s=0,o=0,l=0;l<e.length;l++)"Morning"===e[l].timing&&(t+=Number(e[l].rating),a++),"Afternoon"===e[l].timing&&(n+=Number(e[l].rating),r++),"Evening"===e[l].timing&&(s+=Number(e[l].rating),o++);return{morningAverage:0===a?"N/A":Math.floor(10*t/a)/10,afternoonAverage:0===r?"N/A":Math.floor(10*n/r)/10,eveningAverage:0===o?"N/A":Math.floor(10*s/o)/10}}(this.props.logs.list);return r.a.createElement("div",{className:dt.a.container},r.a.createElement(fe,null),r.a.createElement("h1",null,"User stats"),r.a.createElement("div",{className:dt.a.first_block},r.a.createElement("div",{className:dt.a.average_block},r.a.createElement("b",null,"Your average mood:"),r.a.createElement(vt,null,function(e){for(var t=0,a=0;a<e.length;a++){t+=Number(e[a].rating)}return Math.floor(10*t/e.length)/10}(this.props.logs.list)),r.a.createElement("div",{className:dt.a.small_text_box},"Retrieved from the last 100 logs")),r.a.createElement("div",{className:dt.a.average_block},r.a.createElement("b",null,"7 day mood:"),r.a.createElement(vt,null,e.average),r.a.createElement("div",{className:dt.a.small_text_box},"Counted from the last 7 active days from ",r.a.createElement("br",null),e.firstDay," to ",e.lastDay))),r.a.createElement("div",{className:dt.a.graph_container},r.a.createElement("b",null,"Your mood graph"),r.a.createElement(mt,{list:t.arr}),r.a.createElement("div",null," From ",t.firstDay," to ",t.lastDay)),r.a.createElement("div",{className:dt.a.daytime_container},r.a.createElement("b",null,"Your mood throughout the day:"),r.a.createElement("br",null),r.a.createElement(Et,{obj:a})))}return r.a.createElement("div",null,r.a.createElement(fe,null),"No logs to be found for the statistics")}return r.a.createElement(q,null)}}]),t}(n.Component);var Nt=Object(c.b)((function(e){return{user:e.user,logs:e.logs}}))(yt),wt=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(s)))).state={password:"",password_confirm:"",isDisabled:!1,error:null,errorMsg:""},a.handlePassword=function(e){var t=e.target.value;a.setState({password:t,error:null})},a.handlePasswordConfirm=function(e){var t=e.target.value;a.setState({password_confirm:t,error:null})},a.renderErrorMessage=function(){return!0===a.state.error?r.a.createElement(ie,{success:!a.state.error,text:a.state.errorMsg}):null},a.handleDeleteAccount=function(){if(0!==a.state.password.trim().length&&0!==a.state.password_confirm.trim().length)if(a.state.password.trim()===a.state.password_confirm.trim()){a.setState({isDisabled:!0});var e={password:a.state.password.trim(),userId:a.props.user.data.id};re.a.post("/api/deleteAccount",e).then((function(e){!0===e.data.error?a.setState({error:!0,errorMsg:e.data.message,isDisabled:!1}):(a.props.dispatch((function(e){e({type:"CLEAN_USER",payload:{}}),e({type:"CLEAN_LOGS",payload:{}})})),a.props.history.push("/"))}))}else a.setState({error:!0,errorMsg:"Passwords do not match"});else a.setState({error:!0,errorMsg:"Fields cannot be empty"})},a.saveNewPassword=function(){if(!a.state.isDisabled){var e=a.state.currentPassword,t=a.state.newPassword,n={_id:a.props.user.data.id,oldpassword:e,newpassword:t};t.trim().length<6?a.setState({passwordChanged:!1,passwordChangedMessage:"The password is too short. You must pick a password longer than 6 characters"}):(a.setState({isDisabled:!0}),re.a.post("/api/changePassword",n).then((function(e){var t=e.data;!0===t.error&&a.setState({passwordChanged:!1,passwordChangedMessage:t.message,isDisabled:!1}),!1===t.error&&a.setState({passwordChanged:!0,passwordChangedMessage:t.message,currentPassword:"",newPassword:"",isDisabled:!1}),t||a.setState({passwordChanged:!1,passwordChangedMessage:"An error occured. Try again later",isDisabled:!1})})))}},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return this.props.user?r.a.createElement("div",null,r.a.createElement(fe,null),r.a.createElement(te,null,r.a.createElement("h2",null,"Delete account:"),r.a.createElement("label",{htmlFor:"password"},"Enter your password:"),r.a.createElement("input",{type:"password",onChange:this.handlePassword}),r.a.createElement("label",{htmlFor:"password_confirm"},"Confirm your password:"),r.a.createElement("input",{type:"password",onChange:this.handlePasswordConfirm}),this.renderErrorMessage(),r.a.createElement("div",{className:lt.a.center},r.a.createElement("div",{onClick:this.handleDeleteAccount},r.a.createElement(X,{background:"#3366FF",color:"#FFFFFF",disabled:this.state.isDisabled},"Delete account"))))):r.a.createElement(q,null)}}]),t}(n.Component);var xt=Object(c.b)((function(e){return{logs:e.logs}}))(wt),Ot=function(e,t){var a=function(a){function n(){return Object(_.a)(this,n),Object(b.a)(this,Object(E.a)(n).apply(this,arguments))}return Object(v.a)(n,a),Object(f.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.props.dispatch({type:"USER_AUTH",payload:re.a.get("/api/auth").then((function(e){return e.data}))})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.user.data.isAuth?!0===e.user.data.isAuth&&!1===t&&this.props.history.push("/dashboard"):!0===t&&typeof data!==String&&this.props.history.push("/login")}},{key:"render",value:function(){return r.a.createElement(e,Object.assign({},this.props,{user:this.props.user}))}}]),n}(n.Component);return Object(c.b)((function(e){return{user:e.user}}))(a)},kt=function(){return r.a.createElement(G,null,r.a.createElement(h.c,null,r.a.createElement(h.a,{path:"/",exact:!0,component:Ot(Q,null)}),r.a.createElement(h.a,{path:"/login",exact:!0,component:Ot(me,!1)}),r.a.createElement(h.a,{path:"/register",exact:!0,component:Ot(ve,null)}),r.a.createElement(h.a,{path:"/dashboard",exact:!0,component:Ot(Ue,!0)}),r.a.createElement(h.a,{path:"/addlog",exact:!0,component:Ot(Ke,!0)}),r.a.createElement(h.a,{path:"/logs",exact:!0,component:Ot($e,!0)}),r.a.createElement(h.a,{path:"/logs/:id",exact:!0,component:Ot(nt,!0)}),r.a.createElement(h.a,{path:"/logout",exact:!0,component:Ot(st,!0)}),r.a.createElement(h.a,{path:"/settings",exact:!0,component:Ot(ct,!0)}),r.a.createElement(h.a,{path:"/delete",exact:!0,component:Ot(xt,!0)}),r.a.createElement(h.a,{path:"/stats",exact:!0,component:Ot(Nt,!0)})))},St=Object(i.a)(u.a,m.a)(i.d);o.a.render(r.a.createElement(c.a,{store:St(g)},r.a.createElement(l.a,null,r.a.createElement(kt,null))),document.getElementById("root"))},17:function(e,t,a){e.exports={header:"header_header__1DoJB",top:"header_top__2A9Qd",logo:"header_logo__2Ot2R",bars:"header_bars__3rSm_",navBar:"header_navBar__1ETXC",appearTop:"header_appearTop__ki9xL",navBarDark:"header_navBarDark__qdi2X",fadeIn:"header_fadeIn__2GvaS",navItem:"header_navItem__6xmHH",nightmode_button:"header_nightmode_button__3F4hB",nightmode_button_caption:"header_nightmode_button_caption__SPxOm",rotateButton:"header_rotateButton__3XFVc"}},2:function(e,t,a){e.exports={container:"stats_container__7qyST",first_block:"stats_first_block__n6IuM",average_block:"stats_average_block__1mXUN",average_box:"stats_average_box__q1c7t",small_text_box:"stats_small_text_box__3HTmP",graph_container:"stats_graph_container__17VsB",graph_canvas:"stats_graph_canvas__13LjJ",graph_stroke:"stats_graph_stroke__3pMDT",y_axis_number:"stats_y_axis_number__2sSge",daytime_container:"stats_daytime_container__aeY41",daytime_canvas:"stats_daytime_canvas__3SsMi",daytime_bullet:"stats_daytime_bullet__2nK2B",daytime_bullet_text:"stats_daytime_bullet_text__2KQCx",y_axis_number_daytime:"stats_y_axis_number_daytime__2THnf",daytime_bottom_line:"stats_daytime_bottom_line__1A-5o",daytime_time:"stats_daytime_time__1TgsY",daytime_icon:"stats_daytime_icon__2Utyt",daytime_icon_nightmode:"stats_daytime_icon_nightmode__2Cyk7"}},21:function(e,t,a){e.exports={logWrapper:"logview_logWrapper__1FmLr",rating_box:"logview_rating_box__1ExsM",icon:"logview_icon__VtSUG",top_line:"logview_top_line__2XIs-",date:"logview_date__33VcB",text:"logview_text__2g1Z_"}},24:function(e,t,a){e.exports={loadingScreen:"loading_loadingScreen__23dXG",barContainer:"loading_barContainer__JVc1y",bar:"loading_bar__I3yZo",wave:"loading_wave__1LPKk",delay1:"loading_delay1__1fsdO",delay2:"loading_delay2__1kcQr"}},25:function(e,t,a){e.exports={loadingScreen:"loadingNetItem_loadingScreen__2wk82",barContainer:"loadingNetItem_barContainer__yAHHU",bar:"loadingNetItem_bar__2U8uR",wave:"loadingNetItem_wave__2LsNr",delay1:"loadingNetItem_delay1__3r3Db",delay2:"loadingNetItem_delay2__2uits"}},26:function(e,t,a){e.exports={item:"logItem_item__3KOEY",rating_box:"logItem_rating_box__2QNdT",icon:"logItem_icon__2X5GM",top_line:"logItem_top_line__3_BWs",date:"logItem_date__333zP",text:"logItem_text__3UfvI"}},29:function(e,t,a){e.exports={wrapper:"home_wrapper__2BDsM",bigLogo:"home_bigLogo__2QwOJ",text:"home_text__1G0-B",textAlt:"home_textAlt__1s2Ul",buttons:"home_buttons__2l109"}},30:function(e,t,a){e.exports={logbutton:"newLog_logbutton__3I18j",available:"newLog_available__1tNvA",unavailable:"newLog_unavailable__zl2uo",floating:"newLog_floating__1UMAC",attentionBorder:"newLog_attentionBorder__1bf9d","at-border":"newLog_at-border__2UryB"}},31:function(e,t,a){e.exports={center:"addlog_center__2Aqua",inputLine:"addlog_inputLine__1YSOg",thumb:"addlog_thumb__2V9UZ"}},32:function(e,t,a){e.exports={center:"settings_center__T2-mN"}},34:function(e,t,a){e.exports={top_panel:"backButton_top_panel__lCZ9R",button_text:"backButton_button_text__2VCnX",back_button:"backButton_back_button__1j5Gv"}},39:function(e,t,a){e.exports={messageBox:"messagebox_messageBox__h5ZuK",animate:"messagebox_animate__1To0z"}},40:function(e,t,a){e.exports={header:"logs_header__3d_3m",bottom_panel:"logs_bottom_panel__3hmbf",logs_wrapper:"logs_logs_wrapper__1-N07"}},64:function(e,t,a){e.exports={button:"button_button__GK1oR"}},65:function(e,t,a){e.exports={formWrapper:"formwrapper_formWrapper__d-Ctr",formWrappe:"formwrapper_formWrappe__1-h7l"}},66:function(e,t,a){e.exports={center_line:"register_center_line__2iHwu"}},67:function(e,t,a){e.exports={moodbox:"moodbox_moodbox__hnKwq"}},68:function(e,t,a){e.exports=a.p+"static/media/morning.32026445.svg"},69:function(e,t,a){e.exports=a.p+"static/media/afternoon.1bf5e1d2.svg"},70:function(e,t,a){e.exports=a.p+"static/media/evening.30a34177.svg"},71:function(e,t,a){e.exports=a(109)}},[[71,1,2]]]);
//# sourceMappingURL=main.b9a2a9f5.chunk.js.map